
/*! Hammer.JS - v1.0.5 - 2013-04-07
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */


 /*!
 * jScrollPane - v2.0.14 - 2013-05-01
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */


 // Generated by CoffeeScript 1.4.0
/*
jQuery Waypoints - v2.0.2
Copyright (c) 2011-2013 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/

/*
selectivizr v1.0.2 - (c) Keith Clark, freely distributable under the terms
of the MIT license.

selectivizr.com
*/

/*! Copyright (c) 2013 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.1.3
 *
 * Requires: 1.2.2+
 */

 /*!
 * VERSION:  1.10.3
 * DATE: 2013-09-02
 * UPDATES AND DOCS AT: http://www.greensock.com
 *
 * @license Copyright (c) 2008-2013, GreenSock. All rights reserved.
 * This work is subject to the terms at http://www.greensock.com/terms_of_use.html or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 *
 * @author: Jack Doyle, jack@greensock.com
 */


// WAIT FOR IMAGES
/*
 * waitForImages 1.4
 * -----------------
 * Provides a callback when all images have loaded in your given selector.
 * http://www.alexanderdickson.com/
 *
 *
 * Copyright (c) 2011 Alex Dickson
 * Licensed under the MIT licenses.
 * See website for more info.
 *
 */




/*
selectivizr v1.0.2 - (c) Keith Clark, freely distributable under the terms
of the MIT license.

selectivizr.com
*/
/*

Notes about this source
-----------------------

 * The #DEBUG_START and #DEBUG_END comments are used to mark blocks of code
   that will be removed prior to building a final release version (using a
   pre-compression script)


References:
-----------

 * CSS Syntax          : http://www.w3.org/TR/2003/WD-css3-syntax-20030813/#style
 * Selectors           : http://www.w3.org/TR/css3-selectors/#selectors
 * IE Compatability    : http://msdn.microsoft.com/en-us/library/cc351024(VS.85).aspx
 * W3C Selector Tests  : http://www.w3.org/Style/CSS/Test/CSS3/Selectors/current/html/tests/

*/

/*
selectivizr v1.0.2 - (c) Keith Clark, freely distributable under the terms
of the MIT license.

selectivizr.com
*/
/*

Notes about this source
-----------------------

 * The #DEBUG_START and #DEBUG_END comments are used to mark blocks of code
   that will be removed prior to building a final release version (using a
   pre-compression script)


References:
-----------

 * CSS Syntax          : http://www.w3.org/TR/2003/WD-css3-syntax-20030813/#style
 * Selectors           : http://www.w3.org/TR/css3-selectors/#selectors
 * IE Compatability    : http://msdn.microsoft.com/en-us/library/cc351024(VS.85).aspx
 * W3C Selector Tests  : http://www.w3.org/Style/CSS/Test/CSS3/Selectors/current/html/tests/

*/

/*
selectivizr v1.0.2 - (c) Keith Clark, freely distributable under the terms
of the MIT license.

selectivizr.com
*/
/*

Notes about this source
-----------------------

 * The #DEBUG_START and #DEBUG_END comments are used to mark blocks of code
   that will be removed prior to building a final release version (using a
   pre-compression script)


References:
-----------

 * CSS Syntax          : http://www.w3.org/TR/2003/WD-css3-syntax-20030813/#style
 * Selectors           : http://www.w3.org/TR/css3-selectors/#selectors
 * IE Compatability    : http://msdn.microsoft.com/en-us/library/cc351024(VS.85).aspx
 * W3C Selector Tests  : http://www.w3.org/Style/CSS/Test/CSS3/Selectors/current/html/tests/

*/

(function(win) {

	// If browser isn't IE, then stop execution! This handles the script
	// being loaded by non IE browsers because the developer didn't use
	// conditional comments.
	if (/*@cc_on!@*/true) return;

	// =========================== Init Objects ============================

	var doc = document;
	var root = doc.documentElement;
	var xhr = getXHRObject();
	var ieVersion = /MSIE (\d+)/.exec(navigator.userAgent)[1];

	// If were not in standards mode, IE is too old / new or we can't create
	// an XMLHttpRequest object then we should get out now.
	if (doc.compatMode != 'CSS1Compat' || ieVersion<6 || ieVersion>8 || !xhr) {
		return;
	}


	// ========================= Common Objects ============================

	// Compatiable selector engines in order of CSS3 support. Note: '*' is
	// a placholder for the object key name. (basically, crude compression)
	var selectorEngines = {
		"NW"								: "*.Dom.select",
		"MooTools"							: "$$",
		"DOMAssistant"						: "*.$",
		"Prototype"							: "$$",
		"YAHOO"								: "*.util.Selector.query",
		"Sizzle"							: "*",
		"jQuery"							: "*",
		"dojo"								: "*.query"
	};

	var selectorMethod;
	var enabledWatchers 					= [];     // array of :enabled/:disabled elements to poll
	var ie6PatchID 							= 0;      // used to solve ie6's multiple class bug
	var patchIE6MultipleClasses				= true;   // if true adds class bloat to ie6
	var namespace 							= "slvzr";

	// Stylesheet parsing regexp's
	var RE_COMMENT							= /(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*/g;
	var RE_IMPORT							= /@import\s*(?:(?:(?:url\(\s*(['"]?)(.*)\1)\s*\))|(?:(['"])(.*)\3))[^;]*;/g;
	var RE_ASSET_URL 						= /\burl\(\s*(["']?)(?!data:)([^"')]+)\1\s*\)/g;
	var RE_PSEUDO_STRUCTURAL				= /^:(empty|(first|last|only|nth(-last)?)-(child|of-type))$/;
	var RE_PSEUDO_ELEMENTS					= /:(:first-(?:line|letter))/g;
	var RE_SELECTOR_GROUP					= /(^|})\s*([^\{]*?[\[:][^{]+)/g;
	var RE_SELECTOR_PARSE					= /([ +~>])|(:[a-z-]+(?:\(.*?\)+)?)|(\[.*?\])/g;
	var RE_LIBRARY_INCOMPATIBLE_PSEUDOS		= /(:not\()?:(hover|enabled|disabled|focus|checked|target|active|visited|first-line|first-letter)\)?/g;
	var RE_PATCH_CLASS_NAME_REPLACE			= /[^\w-]/g;

	// HTML UI element regexp's
	var RE_INPUT_ELEMENTS					= /^(INPUT|SELECT|TEXTAREA|BUTTON)$/;
	var RE_INPUT_CHECKABLE_TYPES			= /^(checkbox|radio)$/;

	// Broken attribute selector implementations (IE7/8 native [^=""], [$=""] and [*=""])
	var BROKEN_ATTR_IMPLEMENTATIONS			= ieVersion>6 ? /[\$\^*]=(['"])\1/ : null;

	// Whitespace normalization regexp's
	var RE_TIDY_TRAILING_WHITESPACE			= /([(\[+~])\s+/g;
	var RE_TIDY_LEADING_WHITESPACE			= /\s+([)\]+~])/g;
	var RE_TIDY_CONSECUTIVE_WHITESPACE		= /\s+/g;
	var RE_TIDY_TRIM_WHITESPACE				= /^\s*((?:[\S\s]*\S)?)\s*$/;

	// String constants
	var EMPTY_STRING						= "";
	var SPACE_STRING						= " ";
	var PLACEHOLDER_STRING					= "$1";

	// =========================== Patching ================================

	// --[ patchStyleSheet() ]----------------------------------------------
	// Scans the passed cssText for selectors that require emulation and
	// creates one or more patches for each matched selector.
	function patchStyleSheet( cssText ) {
		return cssText.replace(RE_PSEUDO_ELEMENTS, PLACEHOLDER_STRING).
			replace(RE_SELECTOR_GROUP, function(m, prefix, selectorText) {
    			var selectorGroups = selectorText.split(",");
    			for (var c = 0, cs = selectorGroups.length; c < cs; c++) {
    				var selector = normalizeSelectorWhitespace(selectorGroups[c]) + SPACE_STRING;
    				var patches = [];
    				selectorGroups[c] = selector.replace(RE_SELECTOR_PARSE,
    					function(match, combinator, pseudo, attribute, index) {
    						if (combinator) {
    							if (patches.length>0) {
    								applyPatches( selector.substring(0, index), patches );
    								patches = [];
    							}
    							return combinator;
    						}
    						else {
    							var patch = (pseudo) ? patchPseudoClass( pseudo ) : patchAttribute( attribute );
    							if (patch) {
    								patches.push(patch);
    								return "." + patch.className;
    							}
    							return match;
    						}
    					}
    				);
    			}
    			return prefix + selectorGroups.join(",");
    		});
	};

	// --[ patchAttribute() ]-----------------------------------------------
	// returns a patch for an attribute selector.
	function patchAttribute( attr ) {
		return (!BROKEN_ATTR_IMPLEMENTATIONS || BROKEN_ATTR_IMPLEMENTATIONS.test(attr)) ?
			{ className: createClassName(attr), applyClass: true } : null;
	};

	// --[ patchPseudoClass() ]---------------------------------------------
	// returns a patch for a pseudo-class
	function patchPseudoClass( pseudo ) {

		var applyClass = true;
		var className = createClassName(pseudo.slice(1));
		var isNegated = pseudo.substring(0, 5) == ":not(";
		var activateEventName;
		var deactivateEventName;

		// if negated, remove :not()
		if (isNegated) {
			pseudo = pseudo.slice(5, -1);
		}

		// bracket contents are irrelevant - remove them
		var bracketIndex = pseudo.indexOf("(")
		if (bracketIndex > -1) {
			pseudo = pseudo.substring(0, bracketIndex);
		}

		// check we're still dealing with a pseudo-class
		if (pseudo.charAt(0) == ":") {
			switch (pseudo.slice(1)) {

				case "root":
					applyClass = function(e) {
						return isNegated ? e != root : e == root;
					}
					break;

				case "target":
					// :target is only supported in IE8
					if (ieVersion == 8) {
						applyClass = function(e) {
							var handler = function() {
								var hash = location.hash;
								var hashID = hash.slice(1);
								return isNegated ? (hash == EMPTY_STRING || e.id != hashID) : (hash != EMPTY_STRING && e.id == hashID);
							};
							addEvent( win, "hashchange", function() {
								toggleElementClass(e, className, handler());
							})
							return handler();
						}
						break;
					}
					return false;

				case "checked":
					applyClass = function(e) {
						if (RE_INPUT_CHECKABLE_TYPES.test(e.type)) {
							addEvent( e, "propertychange", function() {
								if (event.propertyName == "checked") {
									toggleElementClass( e, className, e.checked !== isNegated );
								}
							})
						}
						return e.checked !== isNegated;
					}
					break;

				case "disabled":
					isNegated = !isNegated;

				case "enabled":
					applyClass = function(e) {
						if (RE_INPUT_ELEMENTS.test(e.tagName)) {
							addEvent( e, "propertychange", function() {
								if (event.propertyName == "$disabled") {
									toggleElementClass( e, className, e.$disabled === isNegated );
								}
							});
							enabledWatchers.push(e);
							e.$disabled = e.disabled;
							return e.disabled === isNegated;
						}
						return pseudo == ":enabled" ? isNegated : !isNegated;
					}
					break;

				case "focus":
					activateEventName = "focus";
					deactivateEventName = "blur";

				case "hover":
					if (!activateEventName) {
						activateEventName = "mouseenter";
						deactivateEventName = "mouseleave";
					}
					applyClass = function(e) {
						addEvent( e, isNegated ? deactivateEventName : activateEventName, function() {
							toggleElementClass( e, className, true );
						})
						addEvent( e, isNegated ? activateEventName : deactivateEventName, function() {
							toggleElementClass( e, className, false );
						})
						return isNegated;
					}
					break;

				// everything else
				default:
					// If we don't support this pseudo-class don't create
					// a patch for it
					if (!RE_PSEUDO_STRUCTURAL.test(pseudo)) {
						return false;
					}
					break;
			}
		}
		return { className: className, applyClass: applyClass };
	};

	// --[ applyPatches() ]-------------------------------------------------
	// uses the passed selector text to find DOM nodes and patch them
	function applyPatches(selectorText, patches) {
		var elms;

		// Although some selector libraries can find :checked :enabled etc.
		// we need to find all elements that could have that state because
		// it can be changed by the user.
		var domSelectorText = selectorText.replace(RE_LIBRARY_INCOMPATIBLE_PSEUDOS, EMPTY_STRING);

		// If the dom selector equates to an empty string or ends with
		// whitespace then we need to append a universal selector (*) to it.
		if (domSelectorText == EMPTY_STRING || domSelectorText.charAt(domSelectorText.length - 1) == SPACE_STRING) {
			domSelectorText += "*";
		}

		// Ensure we catch errors from the selector library
		try {
			elms = selectorMethod( domSelectorText );
		} catch (ex) {
			// #DEBUG_START
			log( "Selector '" + selectorText + "' threw exception '" + ex + "'" );
			// #DEBUG_END
		}


		if (elms) {
			for (var d = 0, dl = elms.length; d < dl; d++) {
				var elm = elms[d];
				var cssClasses = elm.className;
				for (var f = 0, fl = patches.length; f < fl; f++) {
					var patch = patches[f];

					if (!hasPatch(elm, patch)) {
						if (patch.applyClass && (patch.applyClass === true || patch.applyClass(elm) === true)) {
							cssClasses = toggleClass(cssClasses, patch.className, true );
						}
					}
				}
				elm.className = cssClasses;
			}
		}
	};

	// --[ hasPatch() ]-----------------------------------------------------
	// checks for the exsistence of a patch on an element
	function hasPatch( elm, patch ) {
		return new RegExp("(^|\\s)" + patch.className + "(\\s|$)").test(elm.className);
	};


	// =========================== Utility =================================

	function createClassName( className ) {
		return namespace + "-" + ((ieVersion == 6 && patchIE6MultipleClasses) ?
			ie6PatchID++
		:
			className.replace(RE_PATCH_CLASS_NAME_REPLACE, function(a) { return a.charCodeAt(0) }));
	};

	// --[ log() ]----------------------------------------------------------
	// #DEBUG_START
	function log( message ) {
		if (win.console) {
			win.console.log(message);
		}
	};
	// #DEBUG_END

	// --[ trim() ]---------------------------------------------------------
	// removes leading, trailing whitespace from a string
	function trim( text ) {
		return text.replace(RE_TIDY_TRIM_WHITESPACE, PLACEHOLDER_STRING);
	};

	// --[ normalizeWhitespace() ]------------------------------------------
	// removes leading, trailing and consecutive whitespace from a string
	function normalizeWhitespace( text ) {
		return trim(text).replace(RE_TIDY_CONSECUTIVE_WHITESPACE, SPACE_STRING);
	};

	// --[ normalizeSelectorWhitespace() ]----------------------------------
	// tidies whitespace around selector brackets and combinators
	function normalizeSelectorWhitespace( selectorText ) {
		return normalizeWhitespace(selectorText.
			replace(RE_TIDY_TRAILING_WHITESPACE, PLACEHOLDER_STRING).
			replace(RE_TIDY_LEADING_WHITESPACE, PLACEHOLDER_STRING)
		);
	};

	// --[ toggleElementClass() ]-------------------------------------------
	// toggles a single className on an element
	function toggleElementClass( elm, className, on ) {
		var oldClassName = elm.className;
		var newClassName = toggleClass(oldClassName, className, on);
		if (newClassName != oldClassName) {
			elm.className = newClassName;
			elm.parentNode.className += EMPTY_STRING;
		}
	};

	// --[ toggleClass() ]--------------------------------------------------
	// adds / removes a className from a string of classNames. Used to
	// manage multiple class changes without forcing a DOM redraw
	function toggleClass( classList, className, on ) {
		var re = RegExp("(^|\\s)" + className + "(\\s|$)");
		var classExists = re.test(classList);
		if (on) {
			return classExists ? classList : classList + SPACE_STRING + className;
		} else {
			return classExists ? trim(classList.replace(re, PLACEHOLDER_STRING)) : classList;
		}
	};

	// --[ addEvent() ]-----------------------------------------------------
	function addEvent(elm, eventName, eventHandler) {
		elm.attachEvent("on" + eventName, eventHandler);
	};

	// --[ getXHRObject() ]-------------------------------------------------
	function getXHRObject()
	{
		if (win.XMLHttpRequest) {
			return new XMLHttpRequest;
		}
		try	{
			return new ActiveXObject('Microsoft.XMLHTTP');
		} catch(e) {
			return null;
		}
	};

	// --[ loadStyleSheet() ]-----------------------------------------------
	function loadStyleSheet( url ) {
		xhr.open("GET", url, false);
		xhr.send();
		return (xhr.status==200) ? xhr.responseText : EMPTY_STRING;
	};

	// --[ resolveUrl() ]---------------------------------------------------
	// Converts a URL fragment to a fully qualified URL using the specified
	// context URL. Returns null if same-origin policy is broken
	function resolveUrl( url, contextUrl ) {

		function getProtocolAndHost( url ) {
			return url.substring(0, url.indexOf("/", 8));
		};

		// absolute path
		if (/^https?:\/\//i.test(url)) {
			return getProtocolAndHost(contextUrl) == getProtocolAndHost(url) ? url : null;
		}

		// root-relative path
		if (url.charAt(0)=="/")	{
			return getProtocolAndHost(contextUrl) + url;
		}

		// relative path
		var contextUrlPath = contextUrl.split(/[?#]/)[0]; // ignore query string in the contextUrl
		if (url.charAt(0) != "?" && contextUrlPath.charAt(contextUrlPath.length - 1) != "/") {
			contextUrlPath = contextUrlPath.substring(0, contextUrlPath.lastIndexOf("/") + 1);
		}

		return contextUrlPath + url;
	};

	// --[ parseStyleSheet() ]----------------------------------------------
	// Downloads the stylesheet specified by the URL, removes it's comments
	// and recursivly replaces @import rules with their contents, ultimately
	// returning the full cssText.
	function parseStyleSheet( url ) {
		if (url) {
			return loadStyleSheet(url).replace(RE_COMMENT, EMPTY_STRING).
			replace(RE_IMPORT, function( match, quoteChar, importUrl, quoteChar2, importUrl2 ) {
				return parseStyleSheet(resolveUrl(importUrl || importUrl2, url));
			}).
			replace(RE_ASSET_URL, function( match, quoteChar, assetUrl ) {
				quoteChar = quoteChar || EMPTY_STRING;
				return " url(" + quoteChar + resolveUrl(assetUrl, url) + quoteChar + ") ";
			});
		}
		return EMPTY_STRING;
	};

	// --[ init() ]---------------------------------------------------------
	function init() {
		// honour the <base> tag
		var url, stylesheet;
		var baseTags = doc.getElementsByTagName("BASE");
		var baseUrl = (baseTags.length > 0) ? baseTags[0].href : doc.location.href;

		/* Note: This code prevents IE from freezing / crashing when using
		@font-face .eot files but it modifies the <head> tag and could
		trigger the IE stylesheet limit. It will also cause FOUC issues.
		If you choose to use it, make sure you comment out the for loop
		directly below this comment.

		var head = doc.getElementsByTagName("head")[0];
		for (var c=doc.styleSheets.length-1; c>=0; c--) {
			stylesheet = doc.styleSheets[c]
			head.appendChild(doc.createElement("style"))
			var patchedStylesheet = doc.styleSheets[doc.styleSheets.length-1];

			if (stylesheet.href != EMPTY_STRING) {
				url = resolveUrl(stylesheet.href, baseUrl)
				if (url) {
					patchedStylesheet.cssText = patchStyleSheet( parseStyleSheet( url ) )
					stylesheet.disabled = true
					setTimeout( function () {
						stylesheet.owningElement.parentNode.removeChild(stylesheet.owningElement)
					})
				}
			}
		}
		*/

		for (var c = 0; c < doc.styleSheets.length; c++) {
			stylesheet = doc.styleSheets[c]
			if (stylesheet.href != EMPTY_STRING) {
				url = resolveUrl(stylesheet.href, baseUrl);
				if (url) {
					stylesheet.cssText = patchStyleSheet( parseStyleSheet( url ) );
				}
			}
		}

		// :enabled & :disabled polling script (since we can't hook
		// onpropertychange event when an element is disabled)
		if (enabledWatchers.length > 0) {
			setInterval( function() {
				for (var c = 0, cl = enabledWatchers.length; c < cl; c++) {
					var e = enabledWatchers[c];
					if (e.disabled !== e.$disabled) {
						if (e.disabled) {
							e.disabled = false;
							e.$disabled = true;
							e.disabled = true;
						}
						else {
							e.$disabled = e.disabled;
						}
					}
				}
			},250)
		}
	};

	// Bind selectivizr to the ContentLoaded event.
	ContentLoaded(win, function() {
		// Determine the "best fit" selector engine
		for (var engine in selectorEngines) {
			var members, member, context = win;
			if (win[engine]) {
				members = selectorEngines[engine].replace("*", engine).split(".");
				while ((member = members.shift()) && (context = context[member])) {}
				if (typeof context == "function") {
					selectorMethod = context;
					init();
					return;
				}
			}
		}
	});


	/*!
	 * ContentLoaded.js by Diego Perini, modified for IE<9 only (to save space)
	 *
	 * Author: Diego Perini (diego.perini at gmail.com)
	 * Summary: cross-browser wrapper for DOMContentLoaded
	 * Updated: 20101020
	 * License: MIT
	 * Version: 1.2
	 *
	 * URL:
	 * http://javascript.nwbox.com/ContentLoaded/
	 * http://javascript.nwbox.com/ContentLoaded/MIT-LICENSE
	 *
	 */

	// @w window reference
	// @f function reference
	function ContentLoaded(win, fn) {

		var done = false, top = true,
		init = function(e) {
			if (e.type == "readystatechange" && doc.readyState != "complete") return;
			(e.type == "load" ? win : doc).detachEvent("on" + e.type, init, false);
			if (!done && (done = true)) fn.call(win, e.type || e);
		},
		poll = function() {
			try { root.doScroll("left"); } catch(e) { setTimeout(poll, 50); return; }
			init('poll');
		};

		if (doc.readyState == "complete") fn.call(win, EMPTY_STRING);
		else {
			if (doc.createEventObject && root.doScroll) {
				try { top = !win.frameElement; } catch(e) { }
				if (top) poll();
			}
			addEvent(doc,"readystatechange", init);
			addEvent(win,"load", init);
		}
	};
})(this);

// Generated by CoffeeScript 1.4.0
/*
jQuery Waypoints - v2.0.2
Copyright (c) 2011-2013 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/licenses.txt
*/
(function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++){if(e in this&&this[e]===t)return e}return-1},e=[].slice;(function(t,e){if(typeof define==="function"&&define.amd){return define("waypoints",["jquery"],function(n){return e(n,t)})}else{return e(t.jQuery,t)}})(this,function(n,r){var i,o,l,s,f,u,a,c,h,d,p,y,v,w,g,m;i=n(r);c=t.call(r,"ontouchstart")>=0;s={horizontal:{},vertical:{}};f=1;a={};u="waypoints-context-id";p="resize.waypoints";y="scroll.waypoints";v=1;w="waypoints-waypoint-ids";g="waypoint";m="waypoints";o=function(){function t(t){var e=this;this.$element=t;this.element=t[0];this.didResize=false;this.didScroll=false;this.id="context"+f++;this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()};this.waypoints={horizontal:{},vertical:{}};t.data(u,this.id);a[this.id]=this;t.bind(y,function(){var t;if(!(e.didScroll||c)){e.didScroll=true;t=function(){e.doScroll();return e.didScroll=false};return r.setTimeout(t,n[m].settings.scrollThrottle)}});t.bind(p,function(){var t;if(!e.didResize){e.didResize=true;t=function(){n[m]("refresh");return e.didResize=false};return r.setTimeout(t,n[m].settings.resizeThrottle)}})}t.prototype.doScroll=function(){var t,e=this;t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};if(c&&(!t.vertical.oldScroll||!t.vertical.newScroll)){n[m]("refresh")}n.each(t,function(t,r){var i,o,l;l=[];o=r.newScroll>r.oldScroll;i=o?r.forward:r.backward;n.each(e.waypoints[t],function(t,e){var n,i;if(r.oldScroll<(n=e.offset)&&n<=r.newScroll){return l.push(e)}else if(r.newScroll<(i=e.offset)&&i<=r.oldScroll){return l.push(e)}});l.sort(function(t,e){return t.offset-e.offset});if(!o){l.reverse()}return n.each(l,function(t,e){if(e.options.continuous||t===l.length-1){return e.trigger([i])}})});return this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}};t.prototype.refresh=function(){var t,e,r,i=this;r=n.isWindow(this.element);e=this.$element.offset();this.doScroll();t={horizontal:{contextOffset:r?0:e.left,contextScroll:r?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:r?0:e.top,contextScroll:r?0:this.oldScroll.y,contextDimension:r?n[m]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};return n.each(t,function(t,e){return n.each(i.waypoints[t],function(t,r){var i,o,l,s,f;i=r.options.offset;l=r.offset;o=n.isWindow(r.element)?0:r.$element.offset()[e.offsetProp];if(n.isFunction(i)){i=i.apply(r.element)}else if(typeof i==="string"){i=parseFloat(i);if(r.options.offset.indexOf("%")>-1){i=Math.ceil(e.contextDimension*i/100)}}r.offset=o-e.contextOffset+e.contextScroll-i;if(r.options.onlyOnScroll&&l!=null||!r.enabled){return}if(l!==null&&l<(s=e.oldScroll)&&s<=r.offset){return r.trigger([e.backward])}else if(l!==null&&l>(f=e.oldScroll)&&f>=r.offset){return r.trigger([e.forward])}else if(l===null&&e.oldScroll>=r.offset){return r.trigger([e.forward])}})})};t.prototype.checkEmpty=function(){if(n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical)){this.$element.unbind([p,y].join(" "));return delete a[this.id]}};return t}();l=function(){function t(t,e,r){var i,o;r=n.extend({},n.fn[g].defaults,r);if(r.offset==="bottom-in-view"){r.offset=function(){var t;t=n[m]("viewportHeight");if(!n.isWindow(e.element)){t=e.$element.height()}return t-n(this).outerHeight()}}this.$element=t;this.element=t[0];this.axis=r.horizontal?"horizontal":"vertical";this.callback=r.handler;this.context=e;this.enabled=r.enabled;this.id="waypoints"+v++;this.offset=null;this.options=r;e.waypoints[this.axis][this.id]=this;s[this.axis][this.id]=this;i=(o=t.data(w))!=null?o:[];i.push(this.id);t.data(w,i)}t.prototype.trigger=function(t){if(!this.enabled){return}if(this.callback!=null){this.callback.apply(this.element,t)}if(this.options.triggerOnce){return this.destroy()}};t.prototype.disable=function(){return this.enabled=false};t.prototype.enable=function(){this.context.refresh();return this.enabled=true};t.prototype.destroy=function(){delete s[this.axis][this.id];delete this.context.waypoints[this.axis][this.id];return this.context.checkEmpty()};t.getWaypointsByElement=function(t){var e,r;r=n(t).data(w);if(!r){return[]}e=n.extend({},s.horizontal,s.vertical);return n.map(r,function(t){return e[t]})};return t}();d={init:function(t,e){var r;if(e==null){e={}}if((r=e.handler)==null){e.handler=t}this.each(function(){var t,r,i,s;t=n(this);i=(s=e.context)!=null?s:n.fn[g].defaults.context;if(!n.isWindow(i)){i=t.closest(i)}i=n(i);r=a[i.data(u)];if(!r){r=new o(i)}return new l(t,r,e)});n[m]("refresh");return this},disable:function(){return d._invoke(this,"disable")},enable:function(){return d._invoke(this,"enable")},destroy:function(){return d._invoke(this,"destroy")},prev:function(t,e){return d._traverse.call(this,t,e,function(t,e,n){if(e>0){return t.push(n[e-1])}})},next:function(t,e){return d._traverse.call(this,t,e,function(t,e,n){if(e<n.length-1){return t.push(n[e+1])}})},_traverse:function(t,e,i){var o,l;if(t==null){t="vertical"}if(e==null){e=r}l=h.aggregate(e);o=[];this.each(function(){var e;e=n.inArray(this,l[t]);return i(o,e,l[t])});return this.pushStack(o)},_invoke:function(t,e){t.each(function(){var t;t=l.getWaypointsByElement(this);return n.each(t,function(t,n){n[e]();return true})});return this}};n.fn[g]=function(){var t,r;r=arguments[0],t=2<=arguments.length?e.call(arguments,1):[];if(d[r]){return d[r].apply(this,t)}else if(n.isFunction(r)){return d.init.apply(this,arguments)}else if(n.isPlainObject(r)){return d.init.apply(this,[null,r])}else if(!r){return n.error("jQuery Waypoints needs a callback function or handler option.")}else{return n.error("The "+r+" method does not exist in jQuery Waypoints.")}};n.fn[g].defaults={context:r,continuous:true,enabled:true,horizontal:false,offset:0,triggerOnce:false};h={refresh:function(){return n.each(a,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return(t=r.innerHeight)!=null?t:i.height()},aggregate:function(t){var e,r,i;e=s;if(t){e=(i=a[n(t).data(u)])!=null?i.waypoints:void 0}if(!e){return[]}r={horizontal:[],vertical:[]};n.each(r,function(t,i){n.each(e[t],function(t,e){return i.push(e)});i.sort(function(t,e){return t.offset-e.offset});r[t]=n.map(i,function(t){return t.element});return r[t]=n.unique(r[t])});return r},above:function(t){if(t==null){t=r}return h._filter(t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){if(t==null){t=r}return h._filter(t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){if(t==null){t=r}return h._filter(t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){if(t==null){t=r}return h._filter(t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(t,e){return d[t]=e},_invoke:function(t){var e;e=n.extend({},s.vertical,s.horizontal);return n.each(e,function(e,n){n[t]();return true})},_filter:function(t,e,r){var i,o;i=a[n(t).data(u)];if(!i){return[]}o=[];n.each(i.waypoints[e],function(t,e){if(r(i,e)){return o.push(e)}});o.sort(function(t,e){return t.offset-e.offset});return n.map(o,function(t){return t.element})}};n[m]=function(){var t,n;n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[];if(h[n]){return h[n].apply(null,t)}else{return h.aggregate.call(null,n)}};n[m].settings={resizeThrottle:100,scrollThrottle:30};return i.load(function(){return n[m]("refresh")})})}).call(this);


/*! Hammer.JS - v1.0.5 - 2013-04-07
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */

if(typeof revslider_showDoubleJqueryError != 'function')
{ 
 		
	(function(t,e){"use strict";function n(){if(!i.READY){i.event.determineEventTypes();for(var t in i.gestures)i.gestures.hasOwnProperty(t)&&i.detection.register(i.gestures[t]);i.event.onTouch(i.DOCUMENT,i.EVENT_MOVE,i.detection.detect),i.event.onTouch(i.DOCUMENT,i.EVENT_END,i.detection.detect),i.READY=!0}}var i=function(t,e){return new i.Instance(t,e||{})};i.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},i.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,i.HAS_TOUCHEVENTS="ontouchstart"in t,i.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,i.NO_MOUSEEVENTS=i.HAS_TOUCHEVENTS&&navigator.userAgent.match(i.MOBILE_REGEX),i.EVENT_TYPES={},i.DIRECTION_DOWN="down",i.DIRECTION_LEFT="left",i.DIRECTION_UP="up",i.DIRECTION_RIGHT="right",i.POINTER_MOUSE="mouse",i.POINTER_TOUCH="touch",i.POINTER_PEN="pen",i.EVENT_START="start",i.EVENT_MOVE="move",i.EVENT_END="end",i.DOCUMENT=document,i.plugins={},i.READY=!1,i.Instance=function(t,e){var r=this;return n(),this.element=t,this.enabled=!0,this.options=i.utils.extend(i.utils.extend({},i.defaults),e||{}),this.options.stop_browser_behavior&&i.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),i.event.onTouch(t,i.EVENT_START,function(t){r.enabled&&i.detection.startDetect(r,t)}),this},i.Instance.prototype={on:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.addEventListener(n[i],e,!1);return this},off:function(t,e){for(var n=t.split(" "),i=0;n.length>i;i++)this.element.removeEventListener(n[i],e,!1);return this},trigger:function(t,e){var n=i.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var r=this.element;return i.utils.hasParent(e.target,r)&&(r=e.target),r.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this}};var r=null,o=!1,s=!1;i.event={bindDom:function(t,e,n){for(var i=e.split(" "),r=0;i.length>r;r++)t.addEventListener(i[r],n,!1)},onTouch:function(t,e,n){var a=this;this.bindDom(t,i.EVENT_TYPES[e],function(c){var u=c.type.toLowerCase();if(!u.match(/mouse/)||!s){(u.match(/touch/)||u.match(/pointerdown/)||u.match(/mouse/)&&1===c.which)&&(o=!0),u.match(/touch|pointer/)&&(s=!0);var h=0;o&&(i.HAS_POINTEREVENTS&&e!=i.EVENT_END?h=i.PointerEvent.updatePointer(e,c):u.match(/touch/)?h=c.touches.length:s||(h=u.match(/up/)?0:1),h>0&&e==i.EVENT_END?e=i.EVENT_MOVE:h||(e=i.EVENT_END),h||null===r?r=c:c=r,n.call(i.detection,a.collectEventData(t,e,c)),i.HAS_POINTEREVENTS&&e==i.EVENT_END&&(h=i.PointerEvent.updatePointer(e,c))),h||(r=null,o=!1,s=!1,i.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=i.HAS_POINTEREVENTS?i.PointerEvent.getEvents():i.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],i.EVENT_TYPES[i.EVENT_START]=t[0],i.EVENT_TYPES[i.EVENT_MOVE]=t[1],i.EVENT_TYPES[i.EVENT_END]=t[2]},getTouchList:function(t){return i.HAS_POINTEREVENTS?i.PointerEvent.getTouchList():t.touches?t.touches:[{identifier:1,pageX:t.pageX,pageY:t.pageY,target:t.target}]},collectEventData:function(t,e,n){var r=this.getTouchList(n,e),o=i.POINTER_TOUCH;return(n.type.match(/mouse/)||i.PointerEvent.matchType(i.POINTER_MOUSE,n))&&(o=i.POINTER_MOUSE),{center:i.utils.getCenter(r),timeStamp:(new Date).getTime(),target:n.target,touches:r,eventType:e,pointerType:o,srcEvent:n,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return i.detection.stopDetect()}}}},i.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return Object.keys(t.pointers).sort().forEach(function(n){e.push(t.pointers[n])}),e},updatePointer:function(t,e){return t==i.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var n={};return n[i.POINTER_MOUSE]=e.pointerType==e.MSPOINTER_TYPE_MOUSE||e.pointerType==i.POINTER_MOUSE,n[i.POINTER_TOUCH]=e.pointerType==e.MSPOINTER_TYPE_TOUCH||e.pointerType==i.POINTER_TOUCH,n[i.POINTER_PEN]=e.pointerType==e.MSPOINTER_TYPE_PEN||e.pointerType==i.POINTER_PEN,n[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},i.utils={extend:function(t,n,i){for(var r in n)t[r]!==e&&i||(t[r]=n[r]);return t},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){for(var e=[],n=[],i=0,r=t.length;r>i;i++)e.push(t[i].pageX),n.push(t[i].pageY);return{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2}},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.pageY-t.pageY,i=e.pageX-t.pageX;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){var n=Math.abs(t.pageX-e.pageX),r=Math.abs(t.pageY-e.pageY);return n>=r?t.pageX-e.pageX>0?i.DIRECTION_LEFT:i.DIRECTION_RIGHT:t.pageY-e.pageY>0?i.DIRECTION_UP:i.DIRECTION_DOWN},getDistance:function(t,e){var n=e.pageX-t.pageX,i=e.pageY-t.pageY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==i.DIRECTION_UP||t==i.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){var n,i=["webkit","khtml","moz","ms","o",""];if(e&&t.style){for(var r=0;i.length>r;r++)for(var o in e)e.hasOwnProperty(o)&&(n=o,i[r]&&(n=i[r]+n.substring(0,1).toUpperCase()+n.substring(1)),t.style[n]=e[o]);"none"==e.userSelect&&(t.onselectstart=function(){return!1})}}},i.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:i.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);for(var e=this.current.inst.options,n=0,r=this.gestures.length;r>n;n++){var o=this.gestures[n];if(!this.stopped&&e[o.name]!==!1&&o.handler.call(o,t,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=t),t.eventType==i.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=i.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;if(e&&(t.touches.length!=e.touches.length||t.touches===e.touches)){e.touches=[];for(var n=0,r=t.touches.length;r>n;n++)e.touches.push(i.utils.extend({},t.touches[n]))}var o=t.timeStamp-e.timeStamp,s=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,c=i.utils.getVelocity(o,s,a);return i.utils.extend(t,{deltaTime:o,deltaX:s,deltaY:a,velocityX:c.x,velocityY:c.y,distance:i.utils.getDistance(e.center,t.center),angle:i.utils.getAngle(e.center,t.center),direction:i.utils.getDirection(e.center,t.center),scale:i.utils.getScale(e.touches,t.touches),rotation:i.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var n=t.defaults||{};return n[t.name]===e&&(n[t.name]=!0),i.utils.extend(i.defaults,n,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},i.gestures=i.gestures||{},i.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case i.EVENT_START:clearTimeout(this.timer),i.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==i.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case i.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case i.EVENT_END:clearTimeout(this.timer)}}},i.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==i.EVENT_END){var n=i.detection.previous,r=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;n&&"tap"==n.name&&t.timeStamp-n.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),r=!0),(!r||e.options.tap_always)&&(i.detection.current.name="tap",e.trigger(i.detection.current.name,t))}}},i.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==i.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},i.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(n.options.drag_max_touches>0&&t.touches.length>n.options.drag_max_touches))switch(t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:if(t.distance<n.options.drag_min_distance&&i.detection.current.name!=this.name)return;i.detection.current.name=this.name,(i.detection.current.lastEvent.drag_locked_to_axis||n.options.drag_lock_to_axis&&n.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var r=i.detection.current.lastEvent.direction;t.drag_locked_to_axis&&r!==t.direction&&(t.direction=i.utils.isVertical(r)?0>t.deltaY?i.DIRECTION_UP:i.DIRECTION_DOWN:0>t.deltaX?i.DIRECTION_LEFT:i.DIRECTION_RIGHT),this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),n.trigger(this.name+t.direction,t),(n.options.drag_block_vertical&&i.utils.isVertical(t.direction)||n.options.drag_block_horizontal&&!i.utils.isVertical(t.direction))&&t.preventDefault();break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,n){if(i.detection.current.name!=this.name&&this.triggered)return n.trigger(this.name+"end",t),this.triggered=!1,e;if(!(2>t.touches.length))switch(n.options.transform_always_block&&t.preventDefault(),t.eventType){case i.EVENT_START:this.triggered=!1;break;case i.EVENT_MOVE:var r=Math.abs(1-t.scale),o=Math.abs(t.rotation);if(n.options.transform_min_scale>r&&n.options.transform_min_rotation>o)return;i.detection.current.name=this.name,this.triggered||(n.trigger(this.name+"start",t),this.triggered=!0),n.trigger(this.name,t),o>n.options.transform_min_rotation&&n.trigger("rotate",t),r>n.options.transform_min_scale&&(n.trigger("pinch",t),n.trigger("pinch"+(1>t.scale?"in":"out"),t));break;case i.EVENT_END:this.triggered&&n.trigger(this.name+"end",t),this.triggered=!1}}},i.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,n){return n.options.prevent_mouseevents&&t.pointerType==i.POINTER_MOUSE?(t.stopDetect(),e):(n.options.prevent_default&&t.preventDefault(),t.eventType==i.EVENT_START&&n.trigger(this.name,t),e)}},i.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==i.EVENT_END&&e.trigger(this.name,t)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=i:(t.Hammer=i,"function"==typeof t.define&&t.define.amd&&t.define("hammer",[],function(){return i}))})(this);
}

/*!
 * jScrollPane - v2.0.14 - 2013-05-01
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */
(function(b,a,c){b.fn.jScrollPane=function(e){function d(D,O){var ay,Q=this,Y,aj,v,al,T,Z,y,q,az,aE,au,i,I,h,j,aa,U,ap,X,t,A,aq,af,am,G,l,at,ax,x,av,aH,f,L,ai=true,P=true,aG=false,k=false,ao=D.clone(false,false).empty(),ac=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";aH=D.css("paddingTop")+" "+D.css("paddingRight")+" "+D.css("paddingBottom")+" "+D.css("paddingLeft");f=(parseInt(D.css("paddingLeft"),10)||0)+(parseInt(D.css("paddingRight"),10)||0);function ar(aQ){var aL,aN,aM,aJ,aI,aP,aO=false,aK=false;ay=aQ;if(Y===c){aI=D.scrollTop();aP=D.scrollLeft();D.css({overflow:"hidden",padding:0});aj=D.innerWidth()+f;v=D.innerHeight();D.width(aj);Y=b('<div class="jspPane" />').css("padding",aH).append(D.children());al=b('<div class="jspContainer" />').css({width:aj+"px",height:v+"px"}).append(Y).appendTo(D)}else{D.css("width","");aO=ay.stickToBottom&&K();aK=ay.stickToRight&&B();aJ=D.innerWidth()+f!=aj||D.outerHeight()!=v;if(aJ){aj=D.innerWidth()+f;v=D.innerHeight();al.css({width:aj+"px",height:v+"px"})}if(!aJ&&L==T&&Y.outerHeight()==Z){D.width(aj);return}L=T;Y.css("width","");D.width(aj);al.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}Y.css("overflow","auto");if(aQ.contentWidth){T=aQ.contentWidth}else{T=Y[0].scrollWidth}Z=Y[0].scrollHeight;Y.css("overflow","");y=T/aj;q=Z/v;az=q>1;aE=y>1;if(!(aE||az)){D.removeClass("jspScrollable");Y.css({top:0,width:al.width()-f});n();E();R();w()}else{D.addClass("jspScrollable");aL=ay.maintainPosition&&(I||aa);if(aL){aN=aC();aM=aA()}aF();z();F();if(aL){N(aK?(T-aj):aN,false);M(aO?(Z-v):aM,false)}J();ag();an();if(ay.enableKeyboardNavigation){S()}if(ay.clickOnTrack){p()}C();if(ay.hijackInternalLinks){m()}}if(ay.autoReinitialise&&!av){av=setInterval(function(){ar(ay)},ay.autoReinitialiseDelay)}else{if(!ay.autoReinitialise&&av){clearInterval(av)}}aI&&D.scrollTop(0)&&M(aI,false);aP&&D.scrollLeft(0)&&N(aP,false);D.trigger("jsp-initialised",[aE||az])}function aF(){if(az){al.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />')));U=al.find(">.jspVerticalBar");ap=U.find(">.jspTrack");au=ap.find(">.jspDrag");if(ay.showArrows){aq=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",aD(0,-1)).bind("click.jsp",aB);af=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",aD(0,1)).bind("click.jsp",aB);if(ay.arrowScrollOnHover){aq.bind("mouseover.jsp",aD(0,-1,aq));af.bind("mouseover.jsp",aD(0,1,af))}ak(ap,ay.verticalArrowPositions,aq,af)}t=v;al.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){t-=b(this).outerHeight()});au.hover(function(){au.addClass("jspHover")},function(){au.removeClass("jspHover")}).bind("mousedown.jsp",function(aI){b("html").bind("dragstart.jsp selectstart.jsp",aB);au.addClass("jspActive");var s=aI.pageY-au.position().top;b("html").bind("mousemove.jsp",function(aJ){V(aJ.pageY-s,false)}).bind("mouseup.jsp mouseleave.jsp",aw);return false});o()}}function o(){ap.height(t+"px");I=0;X=ay.verticalGutter+ap.outerWidth();Y.width(aj-X-f);try{if(U.position().left===0){Y.css("margin-left",X+"px")}}catch(s){}}function z(){if(aE){al.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />')));am=al.find(">.jspHorizontalBar");G=am.find(">.jspTrack");h=G.find(">.jspDrag");if(ay.showArrows){ax=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",aD(-1,0)).bind("click.jsp",aB);x=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",aD(1,0)).bind("click.jsp",aB);
if(ay.arrowScrollOnHover){ax.bind("mouseover.jsp",aD(-1,0,ax));x.bind("mouseover.jsp",aD(1,0,x))}ak(G,ay.horizontalArrowPositions,ax,x)}h.hover(function(){h.addClass("jspHover")},function(){h.removeClass("jspHover")}).bind("mousedown.jsp",function(aI){b("html").bind("dragstart.jsp selectstart.jsp",aB);h.addClass("jspActive");var s=aI.pageX-h.position().left;b("html").bind("mousemove.jsp",function(aJ){W(aJ.pageX-s,false)}).bind("mouseup.jsp mouseleave.jsp",aw);return false});l=al.innerWidth();ah()}}function ah(){al.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){l-=b(this).outerWidth()});G.width(l+"px");aa=0}function F(){if(aE&&az){var aI=G.outerHeight(),s=ap.outerWidth();t-=aI;b(am).find(">.jspCap:visible,>.jspArrow").each(function(){l+=b(this).outerWidth()});l-=s;v-=s;aj-=aI;G.parent().append(b('<div class="jspCorner" />').css("width",aI+"px"));o();ah()}if(aE){Y.width((al.outerWidth()-f)+"px")}Z=Y.outerHeight();q=Z/v;if(aE){at=Math.ceil(1/y*l);if(at>ay.horizontalDragMaxWidth){at=ay.horizontalDragMaxWidth}else{if(at<ay.horizontalDragMinWidth){at=ay.horizontalDragMinWidth}}h.width(at+"px");j=l-at;ae(aa)}if(az){A=Math.ceil(1/q*t);if(A>ay.verticalDragMaxHeight){A=ay.verticalDragMaxHeight}else{if(A<ay.verticalDragMinHeight){A=ay.verticalDragMinHeight}}au.height(A+"px");i=t-A;ad(I)}}function ak(aJ,aL,aI,s){var aN="before",aK="after",aM;if(aL=="os"){aL=/Mac/.test(navigator.platform)?"after":"split"}if(aL==aN){aK=aL}else{if(aL==aK){aN=aL;aM=aI;aI=s;s=aM}}aJ[aN](aI)[aK](s)}function aD(aI,s,aJ){return function(){H(aI,s,this,aJ);this.blur();return false}}function H(aL,aK,aO,aN){aO=b(aO).addClass("jspActive");var aM,aJ,aI=true,s=function(){if(aL!==0){Q.scrollByX(aL*ay.arrowButtonSpeed)}if(aK!==0){Q.scrollByY(aK*ay.arrowButtonSpeed)}aJ=setTimeout(s,aI?ay.initialDelay:ay.arrowRepeatFreq);aI=false};s();aM=aN?"mouseout.jsp":"mouseup.jsp";aN=aN||b("html");aN.bind(aM,function(){aO.removeClass("jspActive");aJ&&clearTimeout(aJ);aJ=null;aN.unbind(aM)})}function p(){w();if(az){ap.bind("mousedown.jsp",function(aN){if(aN.originalTarget===c||aN.originalTarget==aN.currentTarget){var aL=b(this),aO=aL.offset(),aM=aN.pageY-aO.top-I,aJ,aI=true,s=function(){var aR=aL.offset(),aS=aN.pageY-aR.top-A/2,aP=v*ay.scrollPagePercent,aQ=i*aP/(Z-v);if(aM<0){if(I-aQ>aS){Q.scrollByY(-aP)}else{V(aS)}}else{if(aM>0){if(I+aQ<aS){Q.scrollByY(aP)}else{V(aS)}}else{aK();return}}aJ=setTimeout(s,aI?ay.initialDelay:ay.trackClickRepeatFreq);aI=false},aK=function(){aJ&&clearTimeout(aJ);aJ=null;b(document).unbind("mouseup.jsp",aK)};s();b(document).bind("mouseup.jsp",aK);return false}})}if(aE){G.bind("mousedown.jsp",function(aN){if(aN.originalTarget===c||aN.originalTarget==aN.currentTarget){var aL=b(this),aO=aL.offset(),aM=aN.pageX-aO.left-aa,aJ,aI=true,s=function(){var aR=aL.offset(),aS=aN.pageX-aR.left-at/2,aP=aj*ay.scrollPagePercent,aQ=j*aP/(T-aj);if(aM<0){if(aa-aQ>aS){Q.scrollByX(-aP)}else{W(aS)}}else{if(aM>0){if(aa+aQ<aS){Q.scrollByX(aP)}else{W(aS)}}else{aK();return}}aJ=setTimeout(s,aI?ay.initialDelay:ay.trackClickRepeatFreq);aI=false},aK=function(){aJ&&clearTimeout(aJ);aJ=null;b(document).unbind("mouseup.jsp",aK)};s();b(document).bind("mouseup.jsp",aK);return false}})}}function w(){if(G){G.unbind("mousedown.jsp")}if(ap){ap.unbind("mousedown.jsp")}}function aw(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(au){au.removeClass("jspActive")}if(h){h.removeClass("jspActive")}}function V(s,aI){if(!az){return}if(s<0){s=0}else{if(s>i){s=i}}if(aI===c){aI=ay.animateScroll}if(aI){Q.animate(au,"top",s,ad)}else{au.css("top",s);ad(s)}}function ad(aI){if(aI===c){aI=au.position().top}al.scrollTop(0);I=aI;var aL=I===0,aJ=I==i,aK=aI/i,s=-aK*(Z-v);if(ai!=aL||aG!=aJ){ai=aL;aG=aJ;D.trigger("jsp-arrow-change",[ai,aG,P,k])}u(aL,aJ);Y.css("top",s);D.trigger("jsp-scroll-y",[-s,aL,aJ]).trigger("scroll")}function W(aI,s){if(!aE){return}if(aI<0){aI=0}else{if(aI>j){aI=j}}if(s===c){s=ay.animateScroll}if(s){Q.animate(h,"left",aI,ae)
}else{h.css("left",aI);ae(aI)}}function ae(aI){if(aI===c){aI=h.position().left}al.scrollTop(0);aa=aI;var aL=aa===0,aK=aa==j,aJ=aI/j,s=-aJ*(T-aj);if(P!=aL||k!=aK){P=aL;k=aK;D.trigger("jsp-arrow-change",[ai,aG,P,k])}r(aL,aK);Y.css("left",s);D.trigger("jsp-scroll-x",[-s,aL,aK]).trigger("scroll")}function u(aI,s){if(ay.showArrows){aq[aI?"addClass":"removeClass"]("jspDisabled");af[s?"addClass":"removeClass"]("jspDisabled")}}function r(aI,s){if(ay.showArrows){ax[aI?"addClass":"removeClass"]("jspDisabled");x[s?"addClass":"removeClass"]("jspDisabled")}}function M(s,aI){var aJ=s/(Z-v);V(aJ*i,aI)}function N(aI,s){var aJ=aI/(T-aj);W(aJ*j,s)}function ab(aV,aQ,aJ){var aN,aK,aL,s=0,aU=0,aI,aP,aO,aS,aR,aT;try{aN=b(aV)}catch(aM){return}aK=aN.outerHeight();aL=aN.outerWidth();al.scrollTop(0);al.scrollLeft(0);while(!aN.is(".jspPane")){s+=aN.position().top;aU+=aN.position().left;aN=aN.offsetParent();if(/^body|html$/i.test(aN[0].nodeName)){return}}aI=aA();aO=aI+v;if(s<aI||aQ){aR=s-ay.verticalGutter}else{if(s+aK>aO){aR=s-v+aK+ay.verticalGutter}}if(aR){M(aR,aJ)}aP=aC();aS=aP+aj;if(aU<aP||aQ){aT=aU-ay.horizontalGutter}else{if(aU+aL>aS){aT=aU-aj+aL+ay.horizontalGutter}}if(aT){N(aT,aJ)}}function aC(){return -Y.position().left}function aA(){return -Y.position().top}function K(){var s=Z-v;return(s>20)&&(s-aA()<10)}function B(){var s=T-aj;return(s>20)&&(s-aC()<10)}function ag(){al.unbind(ac).bind(ac,function(aL,aM,aK,aI){var aJ=aa,s=I;Q.scrollBy(aK*ay.mouseWheelSpeed,-aI*ay.mouseWheelSpeed,false);return aJ==aa&&s==I})}function n(){al.unbind(ac)}function aB(){return false}function J(){Y.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(s){ab(s.target,false)})}function E(){Y.find(":input,a").unbind("focus.jsp")}function S(){var s,aI,aK=[];aE&&aK.push(am[0]);az&&aK.push(U[0]);Y.focus(function(){D.focus()});D.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(aN){if(aN.target!==this&&!(aK.length&&b(aN.target).closest(aK).length)){return}var aM=aa,aL=I;switch(aN.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:s=aN.keyCode;aJ();break;case 35:M(Z-v);s=null;break;case 36:M(0);s=null;break}aI=aN.keyCode==s&&aM!=aa||aL!=I;return !aI}).bind("keypress.jsp",function(aL){if(aL.keyCode==s){aJ()}return !aI});if(ay.hideFocus){D.css("outline","none");if("hideFocus" in al[0]){D.attr("hideFocus",true)}}else{D.css("outline","");if("hideFocus" in al[0]){D.attr("hideFocus",false)}}function aJ(){var aM=aa,aL=I;switch(s){case 40:Q.scrollByY(ay.keyboardSpeed,false);break;case 38:Q.scrollByY(-ay.keyboardSpeed,false);break;case 34:case 32:Q.scrollByY(v*ay.scrollPagePercent,false);break;case 33:Q.scrollByY(-v*ay.scrollPagePercent,false);break;case 39:Q.scrollByX(ay.keyboardSpeed,false);break;case 37:Q.scrollByX(-ay.keyboardSpeed,false);break}aI=aM!=aa||aL!=I;return aI}}function R(){D.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function C(){if(location.hash&&location.hash.length>1){var aK,aI,aJ=escape(location.hash.substr(1));try{aK=b("#"+aJ+', a[name="'+aJ+'"]')}catch(s){return}if(aK.length&&Y.find(aJ)){if(al.scrollTop()===0){aI=setInterval(function(){if(al.scrollTop()>0){ab(aK,true);b(document).scrollTop(al.position().top);clearInterval(aI)}},50)}else{ab(aK,true);b(document).scrollTop(al.position().top)}}}}function m(){if(b(document.body).data("jspHijack")){return}b(document.body).data("jspHijack",true);b(document.body).delegate("a[href*=#]","click",function(s){var aI=this.href.substr(0,this.href.indexOf("#")),aK=location.href,aO,aP,aJ,aM,aL,aN;if(location.href.indexOf("#")!==-1){aK=location.href.substr(0,location.href.indexOf("#"))}if(aI!==aK){return}aO=escape(this.href.substr(this.href.indexOf("#")+1));aP;try{aP=b("#"+aO+', a[name="'+aO+'"]')}catch(aQ){return}if(!aP.length){return}aJ=aP.closest(".jspScrollable");aM=aJ.data("jsp");aM.scrollToElement(aP,true);if(aJ[0].scrollIntoView){aL=b(a).scrollTop();aN=aP.offset().top;if(aN<aL||aN>aL+b(a).height()){aJ[0].scrollIntoView()}}s.preventDefault()
})}function an(){var aJ,aI,aL,aK,aM,s=false;al.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(aN){var aO=aN.originalEvent.touches[0];aJ=aC();aI=aA();aL=aO.pageX;aK=aO.pageY;aM=false;s=true}).bind("touchmove.jsp",function(aQ){if(!s){return}var aP=aQ.originalEvent.touches[0],aO=aa,aN=I;Q.scrollTo(aJ+aL-aP.pageX,aI+aK-aP.pageY);aM=aM||Math.abs(aL-aP.pageX)>5||Math.abs(aK-aP.pageY)>5;return aO==aa&&aN==I}).bind("touchend.jsp",function(aN){s=false}).bind("click.jsp-touchclick",function(aN){if(aM){aM=false;return false}})}function g(){var s=aA(),aI=aC();D.removeClass("jspScrollable").unbind(".jsp");D.replaceWith(ao.append(Y.children()));ao.scrollTop(s);ao.scrollLeft(aI);if(av){clearInterval(av)}}b.extend(Q,{reinitialise:function(aI){aI=b.extend({},ay,aI);ar(aI)},scrollToElement:function(aJ,aI,s){ab(aJ,aI,s)},scrollTo:function(aJ,s,aI){N(aJ,aI);M(s,aI)},scrollToX:function(aI,s){N(aI,s)},scrollToY:function(s,aI){M(s,aI)},scrollToPercentX:function(aI,s){N(aI*(T-aj),s)},scrollToPercentY:function(aI,s){M(aI*(Z-v),s)},scrollBy:function(aI,s,aJ){Q.scrollByX(aI,aJ);Q.scrollByY(s,aJ)},scrollByX:function(s,aJ){var aI=aC()+Math[s<0?"floor":"ceil"](s),aK=aI/(T-aj);W(aK*j,aJ)},scrollByY:function(s,aJ){var aI=aA()+Math[s<0?"floor":"ceil"](s),aK=aI/(Z-v);V(aK*i,aJ)},positionDragX:function(s,aI){W(s,aI)},positionDragY:function(aI,s){V(aI,s)},animate:function(aI,aL,s,aK){var aJ={};aJ[aL]=s;aI.animate(aJ,{duration:ay.animateDuration,easing:ay.animateEase,queue:false,step:aK})},getContentPositionX:function(){return aC()},getContentPositionY:function(){return aA()},getContentWidth:function(){return T},getContentHeight:function(){return Z},getPercentScrolledX:function(){return aC()/(T-aj)},getPercentScrolledY:function(){return aA()/(Z-v)},getIsScrollableH:function(){return aE},getIsScrollableV:function(){return az},getContentPane:function(){return Y},scrollToBottom:function(s){V(i,s)},hijackInternalLinks:b.noop,destroy:function(){g()}});ar(O)}e=b.extend({},b.fn.jScrollPane.defaults,e);b.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){e[this]=e[this]||e.speed});return this.each(function(){var f=b(this),g=f.data("jsp");if(g){g.reinitialise(e)}else{b("script",f).filter('[type="text/javascript"],:not([type])').remove();g=new d(f,e);f.data("jsp",g)}})};b.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:c,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);



/*************************************
	-	THE MAIN SCRIPT RUTINES	-
**************************************/

jQuery(document).ready(function() {

	// USE THE STRICT MODE IN THE CUSTOM CODE
	"use strict";

	/* IE8 HACK */


	//Navigation Styling
	jQuery("menu > div").first().attr("id","navigation");

	jQuery("#navigation li a").each(function(){
		var $this = jQuery(this);

		if ($this.find('.menubutton').length==0)
			$this.html('<div class="menubutton">'+$this.html()+'</div>');

	});

	if (jQuery('body').hasClass("menuontop")) jQuery('#navigation').css({visibility:"visible"});

	//jQuery("#navigation").html(jQuery("#navigation").html()+jQuery("#menu-footerlogo").html());
	if (jQuery("#menu-footerlogo").length) {
	  jQuery("#navigation").html(jQuery("#navigation").html()+jQuery("#menu-footerlogo").html());
	  jQuery("#menu-footerlogo").remove();
	 }


	// Delegate .transition() calls to .animate()
	// if the browser can't do CSS transitions.
	if (!jQuery.support.transition)
		jQuery.fn.transition = jQuery.fn.animate;


	/* INITIALISATION OF THE BACKGROUDN SLIDER */
	if (jQuery('.cinematic').length>0) {
		initBackgroundSlider();

	} else {
		jQuery('#maincontent').css({display:"block"});
		jQuery('#footer').css({display:"block"});
		jQuery('#subfooter').css({display:"block"});
		jQuery('body').addClass("withoutgradientheader");
	}


	/* MARK SUBMENU ITEMS */
	initMenuFunctions();

	/* START MEDIA WALL INITIALISATION */
	initMediaWall();
	initShowbizSimple();

	/* ACCORDION COLLAPSE EXTRA */
	initAccordions();

	/* SKILL SKILLS */
	initSkills();

	/** SCROLL POSITION CALCULATION **/
	jQuery(window).scroll(function() {
			jQuery('body').data('topos',jQuery(window).scrollTop());
	})

	/* CARE ABOUT THE INPUT FIELDS */
	initInputFields();

	/* BLOG OVERVIEW BUILDER */
	initBlogOverview();

	/*FIT VIDEO */
	jQuery('.fitvideo').fitVids();




	/* START ANIMATIONS */
	//setTimeout(function() {
		if (jQuery(window).scrollTop() < jQuery(window).height())
			if (!is_mobile() && !jQuery('body').hasClass("withoutmoduleanimations") && !isIE(8)) {
				initModuleAnims();
			}

	//},60);

	TweenLite.to(jQuery('#maincontent'),0.3,{autoAlpha:1,delay:0.5});


	/* INIT PUNCHBOX */
	//INITIALISIING THE PUNCHBOX
			jQuery('.portfolio-mediacontainer,#showbiz-teaser-2').each(function() {
		  	  var pmst = jQuery(this);
		  	  var aplay = pmst.data('autoplay');
		  	  var aplaydelay = pmst.data('autoplaydelay');


		  	  if (aplay==undefined) aplay = "disabled";
		  	  if (aplaydelay==undefined) aplaydelay = 5000;

			  pmst.punchBox({
				// SELECTOR
				items:'.punchbox',

				// NAVIGATION SETTINGS
				navigation:{
					container:'insidemedia',		// Put Nav inside or outside the Container
					position:'dettached',			// Dettached, topleft, topright, top, bottomleft,bottom,bottomright
					autoplay:aplay,					// Enable / Disable Navigation (disable)
					autoplaydelay:aplaydelay,		// Timer after how many ms the Slide changes (5000)
				},

				// THE META INFO
				metaInfo:{
					showMeta:true,
					orderMarkup:"%n / %m",
					metaMarkup:'<div class="pb-metawrapper"><div class="pb-title">%title%</div><div class="pb-metadata">%metadata%</div><div class="pb-order">%ordermarkup%</div></div>',
				},

				// THE CALLBACKS
				callbacks:{
					ready:function(slide,oldslide) {
						//alert("ready"+slide.html());
					},
					beforeAnim:function(slide,oldslide) {
						//alert("beforeAnim");
					},
					afterAnim:function(slide,oldslide) {
						//alert("afterAnim");
					}
				}

             })
			})

			jQuery('body').punchBox({
				// SELECTOR
				items:'.singlepunchbox',

				// NAVIGATION SETTINGS
				navigation:{
					container:'insidemedia',		// Put Nav inside or outside the Container
					position:'dettached',			// Dettached, topleft, topright, top, bottomleft,bottom,bottomright
					autoplay:"disabled",					// Enable / Disable Navigation (disable)
					autoplaydelay:0,		// Timer after how many ms the Slide changes (5000)
				},

				// THE META INFO
				metaInfo:{
					showMeta:true,
					orderMarkup:"%n / %m",
					metaMarkup:'<div class="pb-metawrapper"><div class="pb-title">%title%</div><div class="pb-metadata">%metadata%</div><div class="pb-order">%ordermarkup%</div></div>',
				},

				// THE CALLBACKS
				callbacks:{
					ready:function(slide,oldslide) {
						//alert("ready"+slide.html());
					},
					beforeAnim:function(slide,oldslide) {
						//alert("beforeAnim");
					},
					afterAnim:function(slide,oldslide) {
						//alert("afterAnim");
					}
				}

             })



	/* REMOVE UNNEDED <p></p> IF IT IS IN THE fbuilder ! */
	jQuery('.fbuilder_content_wrapper').each(function() {
		var fcw = jQuery(this);
		var lstp = fcw.find('p').last();
		if (lstp.text().length==0) lstp.remove();

	})


	// MAPGYVER
	mapgyver();


	//PRESELECTION
	//preselection();
});




		/*********************************
			-	CHECK IF BROWSER IS IE	-
		********************************/
		function isIE( version, comparison ){
		    var $div = jQuery('<div style="display:none;"/>').appendTo(jQuery('body'));
		    $div.html('<!--[if '+(comparison||'')+' IE '+(version||'')+']><a>&nbsp;</a><![endif]-->');
		    var ieTest = $div.find('a').length;
		    $div.remove();
		    return ieTest;
		}




/******************************
	-	PRESELECTION	-
********************************/
function preselection() {
	jQuery('body').append('<div id="preselector" class="hidden-phone" style="position:fixed;width:290px;height:705px;top:107px;right:-260px;z-index:10000;"></div>');
	var prese = jQuery('#preselector');



	if (jQuery('body').hasClass("gw_light")) {
		prese.append('<div id="preselectorbody" style="position:absolute; padding:20px; box-sizing:border-box; -webkit-box-sizing:border-box; -moz-box-sizing:border-box;top:0px; right:0px;width:260px;height:705px;background:#fff;background:rgba(255,255,255,0.5);border-radius:10px 0px 0px 10px;-moz-border-radius:10px 0px 0px 10px;-webkit-border-radius:10px 0px 0px 10px"></div>');
		prese.append('<div id="preselectorbutton" style="cursor:pointer;position:absolute;width:30px;height:250px;background:url(/wp-content/themes/goodweb/images/assets/switcherbutton_light.png) no-repeat; top:10px;left:0px;"></div>');
	} else {
		prese.append('<div id="preselectorbody" style="position:absolute; padding:20px; box-sizing:border-box; -webkit-box-sizing:border-box; -moz-box-sizing:border-box;top:0px; right:0px;width:260px;height:705px;background:#000;background:rgba(0,0,0,0.5);border-radius:10px 0px 0px 10px;-moz-border-radius:10px 0px 0px 10px;-webkit-border-radius:10px 0px 0px 10px"></div>');
		prese.append('<div id="preselectorbutton" style="cursor:pointer;position:absolute;width:30px;height:250px;background:url(/wp-content/themes/goodweb/images/assets/switcherbutton.png) no-repeat; top:10px;left:0px;"></div>');
	}

	var prebody = jQuery('#preselectorbody');
	var prebut = jQuery('#preselectorbutton');
	var basic = '<div class="item preselectorimg" style="position:relative; margin-bottom:5px;">'+
			'	<div class="mediawall-mediacontainer" style="position:relative;border:3px solid #e5e5e5;border:3px solid rgba(0,0,0,0.05); box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;"><img  src="http://goodwebtheme.com/goodwebpreview/switcher##i##.png" style="width:100%;position:relative;">'+
			'		<a href="##link##"><div class="mediawall-overlay"></div></a>'+
			'	</div>'+
			'	<a href="##link2##"><div class="mediawall-content" style="position:absolute; top:50px;">'+
			'		<h4 class="mediawall-teamname txtshadow" style="border-bottom:none !important">##title##</h4>'+
			'	</div><div class="clear"></div>'+
			'</a>';

	prebody.append('<h4 class="headline-title  gw-rft relative">Select Preview</h4>');
	for (var i=0; i<4;i++) {
		if (i==0) {
			newbasic = basic.replace('##link##','http://light.goodwebtheme.com');
			newbasic = newbasic.replace('##link2##','http://light.goodwebtheme.com');
			newbasic = newbasic.replace('##i##',"_light");
			newbasic = newbasic.replace('##title##','Light');

		} else

		if (i==1) {
			newbasic = basic.replace('##link##','http://minimallight.goodwebtheme.com');
			newbasic = newbasic.replace('##link2##','http://minimallight.goodwebtheme.com');
			newbasic = newbasic.replace('##i##',"_minlight");
			newbasic = newbasic.replace('##title##','Minimal Light');

		} else

		if (i==2) {
			newbasic = basic.replace('##link##','http://dark.goodwebtheme.com');
			newbasic = newbasic.replace('##link2##','http://dark.goodwebtheme.com');
			newbasic = newbasic.replace('##i##',"_dark");
			newbasic = newbasic.replace('##title##','Dark');

		} else

		if (i==3) {
			newbasic = basic.replace('##link##','http://minimaldark.goodwebtheme.com');
			newbasic = newbasic.replace('##link2##','http://minimaldark.goodwebtheme.com');
			newbasic = newbasic.replace('##i##',"_mindark");
			newbasic = newbasic.replace('##title##','Minimal Dark');

		}


			prebody.append(newbasic);
	}
	prebody.append('<a href="http://themeforest.net/item/goodweb-one-multi-page-wordpress-theme/5896610?ref=themepunch" class="smoothscroll" target="clean" ><button style="margin-top:20px;color:#ffffff;background-color:#67ae73" class="btn noncentered txtshadow fullwidth "><i class="demoicon icon-basket-1" style="margin-top:2px"></i>Purchase Theme</button></a>');




	// ANIMATION
	var status = "off"


	prebut.click(function() {
	    if (status=="off")
			TweenLite.to(prese,0.4,{x:0,right:0,ease:Back.easeIn, onComplete:function() { status="on";}});
		else
			TweenLite.to(prese,0.4,{right:-260,ease:Back.easeOut, onComplete:function() { status="off";}});

	})


	// HOVER ACTIVITY
			prebody.find('.preselectorimg').hover(

					function() {

					    var media = jQuery(this);
					    var mc = media.find('.mediawall-mediacontainer');
					    var mo = media.find('.mediawall-overlay');
					    var mct = media.find('.mediawall-content');
					    var mlb = media.find('.mediawall-lightbox');
					    var mli = media.find('.mediawall-link');
					/*	var boxshad = "0px 0px 25px 0px rgba(0,0,0,0.5)";
						if (jQuery('body').hasClass("gw_light")) boxshad = "0px 0px 25px 0px rgba(0,0,0,0.1)"*/


						var w = mc.width();
						var h = mc.height();
						var w=((w*1)-w)/2;
						var h=((h*1)-h)/2;
						if (isIE(8)) {
							w=0;h=0;
						}

					    TweenLite.to(media,0.4,{zIndex:100});
					    TweenLite.fromTo(mo,0.4,{opacity:0},{display:"block",opacity:1,ease:Power3.easeOut});
					    TweenLite.fromTo(mct,0.4,{transformPerspective:500,scale:1.2,z:10,opacity:0},{scale:1,display:"block",opacity:1,z:1,ease:Power2.easeOut});
						TweenLite.fromTo(mlb,0.6,{scale:0.8,transformOrigin:"center top",opacity:0,transformPerspective:500,rotationX:90,x:w,y:h-10},{scale:1,rotationX:0,x:w,y:h,display:"block",opacity:1,ease:Power3.easeOut});
						TweenLite.fromTo(mli,0.8,{scale:0.8,transformOrigin:"center top",opacity:0,transformPerspective:500,rotationX:90,x:w,y:h-10},{scale:1,rotationX:0,x:w,y:h,display:"block",opacity:1,ease:Power3.easeOut});
					    TweenLite.to(mc,0.6,{scale:1,transformPerspective:500,ease:Power3.easeOut,overwrite:"all"});

						//mc.transition({scale:1.2,duration:500});

					},
					function() {

						var media = jQuery(this);
					    var mc = media.find('.mediawall-mediacontainer');
						var mo = media.find('.mediawall-overlay');
						var mct = media.find('.mediawall-content');
						var mlb = media.find('.mediawall-lightbox');
					    var mli = media.find('.mediawall-link');
					    TweenLite.to(media,0.2,{zIndex:1});
				   	    TweenLite.to(mo,0.3,{display:"none",opacity:0});
				   	    TweenLite.to(mct,0.5,{scale:0.5,transformPerspective:500,opacity:0,display:"none"});
						TweenLite.to(mlb,0.4,{scale:0.8,display:"none",opacity:0,transformPerspective:500,rotationX:90,ease:Power3.easeOut,overwrite:"all"});
						TweenLite.to(mli,0.4,{scale:0.8,display:"none",opacity:0,transformPerspective:500,rotationX:90,ease:Power3.easeOut,overwrite:"all"});
					    TweenLite.to(mc,0.3,{scale:1,transformPerspective:500,rotationY:0,rotationX:0,ease:Power4.easeOut,overwrite:"all"});

						//mc.transition({scale:1,duration:500});

			})

}

/******************************
	-	MAP GYVER	-
********************************/
function mapgyver() {

		var mgh = jQuery('#mapgyver_holder');


		var cminheight = mgh.data('height');

		mgh.wrap('<div class="mapviewport"></div>');
		mgh.css({minHeight:cminheight});
		var cont = mgh.find('.content-behind-map');
		cont.css({minHeight:cminheight});
		mgh.height(cont.outerHeight());

		var addd = mgh.data('address');
		var zoo = mgh.data('zoom');

		if (mgh.length!=0) {

				TweenLite.set(mgh,{opacity:0});
				mgh.append('<div class="originalmap" style="min-height:'+cminheight+'px"></div>');

				var nextcontainer = mgh;
				var curwidth = mgh.width();
				var slotwidths = curwidth/5;


				if (!is_mobile())
				for (var i=0;i<5;i++) {

					nextcontainer.append('<div class="nextdepth overlaymaps" id="overlaymap'+i+'" style="width:'+slotwidths+'px;">'+
											'<div class="mapgyver-outterpam">'+
												'<div class="mapgyver-innermap" style="width:'+curwidth+'px;left:'+(0-(i*100))+'%"></div>'+
												'<div class="shadowoverlay"></div>'+
											'</div>'+
										 '</div>');
					nextcontainer = nextcontainer.find('.nextdepth');
				}


				var ormap = mgh.find('.originalmap');
				ormap.wrapInner('<div class="originalmap-inner" style="min-height:'+cminheight+'px"></div>');
				ormap = ormap.find('.originalmap-inner');
				var boundstimer;
				ormap.gmap3({
				 marker:{
					 address: addd
				 },
				 map:{
					  address: addd,
					  options: {
						zoom:zoo	,
						mapTypeId: google.maps.MapTypeId.ROADMAP,
						mapTypeConrol: true,
						navigationControl:true,
						scrollwheel:false,
						streetViewControl:false,

					  },
					  events:{
						  idle:function() {
						  	 setTimeout(function() {
							  jQuery('#mapgyver_holder').addClass("mapisready");
							 },1500)
						  },
						  bounds_changed:function() {

							  clearTimeout(boundstimer);
							  boundstimer = setTimeout(function() {
							 	 jQuery('#mapgyver_holder').addClass("mapisready");

							  },1500)
						  }
					  }
					 },


		        });


		        // PREPARE THE FIRST CLONE OF MAPGYVER
		       if (is_mobile()) {
		       		createMobileMaps();

		       		var resito;
			        jQuery(window).resize(function() {
			        	clearTimeout(resito);
				        resito = setTimeout(function() {
							var mgh = jQuery('#mapgyver_holder');
							var cont = mgh.find('.content-behind-map');
							mgh.height(cont.outerHeight());

							if (jQuery(window).width()>767)
								mgh.find('.originalmap').css({maxWidth:"60%"});
							else
								mgh.find('.originalmap').css({maxWidth:"100%"});
				        },300)
			        })


		       } else {


				    createMapClones();

				    var resito;
			        jQuery(window).resize(function() {
			        	clearTimeout(resito);
				        resito = setTimeout(function() {
				        	var mgh = jQuery('#mapgyver_holder');
				        	var cont = mgh.find('.content-behind-map');
				        	mgh.height(cont.outerHeight());

				        	var curwidth = mgh.width();
							var slotwidths = curwidth/5;
				        	jQuery('.overlaymaps').each(function(i) {
					        	var omps = jQuery(this);
					        	omps.width(slotwidths);
					        	omps.find('.mapgyver-innermap').width(curwidth);
					        	if (i!=0)
						        	TweenLite.to(omps,0.3,{x:slotwidths,ease:Power2.easeOut});
				        	})
							recreateMapClones();
				        },300)
			        })
			     }


		  }
}

function createMobileMaps() {
	var mgh = jQuery('#mapgyver_holder');
	TweenLite.to(mgh,0.4,{opacity:1});

	if (jQuery(window).width()>767)
		mgh.find('.originalmap').css({maxWidth:"60%"});
	else
		mgh.find('.originalmap').css({maxWidth:"100%"});
}

/********************************************
	-	CREATE FIRST TIME MAP CLONES	-
********************************************/

function createMapClones() {
       	 var clonemapfirst = setInterval(function() {
					if (jQuery('#mapgyver_holder').hasClass("mapisready")) {
						setTimeout(function() {
							recreateMapClones();
							foldMapHandler();
						},300)
						clearInterval(clonemapfirst);
					}
		        },50)
}

/******************************
	-	RECREAT THE MAP CLONES	-
********************************/

function recreateMapClones() {
		jQuery('#mapgyver_holder').removeClass("mapisready");
			var mhod = jQuery('#mapgyver_holder .originalmap .originalmap-inner');
			mhod.find('.gmnoprint, .gmnoscreen, .gmn, .gm-style, .gm-style-mtc').each(function() {
				TweenLite.set(jQuery(this),{transformPerspective:7000,rotationY:0,rotationZ:0});
			})
			for (var i=0;i<5;i++) {
				var im = jQuery('#overlaymap'+i+' .mapgyver-innermap');
				im.html("").css({width:im.closest('#mapgyver_holder').width()});
				mhod.clone().appendTo(im);
			}
}

/*****************************************************
	-	HANDLE THE FOLD / UNFOLD MAP FUNCTIONS	-
*****************************************************/

function foldMapHandler() {
	var mgh = jQuery('#mapgyver_holder');
	var ormap = mgh.find('.originalmap');
	var cont = mgh.find('.content-behind-map');

	TweenLite.to(mgh,0.4,{opacity:1});
	foldMaps();
	var over = false;
	var currstatus = "open";

	ormap.hover(function() {
			  over = true;
	},
	function() {
			over = false;
	});

	setInterval(function() {
		if (over==true && currstatus=="open") {
			unFoldMaps();
			cont.css({zIndex:0})
			setTimeout(function() {
				currstatus="close";

			},500);
			currstatus="closing";
		}

		if (over==false && currstatus=="close") {
			recreateMapClones();
			foldMaps();
			setTimeout(function() {
				currstatus="open"
				cont.css({zIndex:110});
			},500);
			currstatus="opening";
		}

	},300)
}

/******************************
	-	FOLD THE MAP	-
********************************/

function foldMaps() {
		var mgh = jQuery('#mapgyver_holder');
		var ormap = mgh.find('.originalmap');
		var cont = mgh.find('.content-behind-map');

		TweenLite.to(ormap,0.1,{opacity:0,overwrite:"all"});
		for (var i=0;i<5;i++) {
			var im = jQuery('#overlaymap'+i);

			var rot = -60;
			var orig = "left center";
			if (i==2) rot=120;
			if (i==3) rot=-120;
			if (i==4) rot=120;
			if (i==5) rot=-120;

			var cc = im.width();
			var distance = cc;
			if (i>0) {
				TweenLite.set(im,{x:distance});
				TweenLite.to(im,0.9,{transformPerspective:7000, transformOrigin:orig,rotationY:rot,ease:Power3.easeInOut,overwrite:"auto"});
			}
			im.find('.shadowoverlay').each(function() {
				TweenLite.to(jQuery(this),0.85,{transformPerspective:7000,opacity:1,overwrite:"all",ease:Power3.easeInOut});
			})


	}

}

/******************************
	-	UNFOLD THE MAP	-
********************************/

function unFoldMaps() {
		var mgh = jQuery('#mapgyver_holder');
		var ormap = mgh.find('.originalmap');
		var cont = mgh.find('.content-behind-map');

		TweenLite.to(ormap,0.6,{opacity:1,delay:0.4,overwrite:"all"});
		for (var i=0;i<5;i++) {
			var im = jQuery('#overlaymap'+i);
			TweenLite.to(im,0.6,{rotationY:0,ease:Power3.easeInOut,overwrite:"auto"});
			im.find('.shadowoverlay').each(function() {
				TweenLite.to(jQuery(this),0.6,{opacity:0,overwrite:"all",ease:Power3.easeInOut});
			})


	}
}


/******************************
	-	INIT BLOG OVERVIEW	-
********************************/
function initBlogOverview() {

	// CREATE A CONTAINER FOR ITEMS WHICH ARE NOT VISIBLE YET
	jQuery('body').append('<div id="unvisibleblogholder"></div>');

	// MOVE FIRST ALL ITEMS IN THIS CONTAINER

	jQuery('.bo-post').appendTo('#unvisibleblogholder');


	jQuery(document).on('click','#bo-loadmorebutton',function() {
		jQuery.waypoints('refresh');
		var whereiwas = jQuery(window).scrollTop();

		loadMoreBlog();
		jQuery('.bo-posts-list').waitForImages(function() {
			setTimeout(function() {

				setBoMediaHeight();
				jQuery('.fitvideo').fitVids();
				reBuildBlogOverview(0.8,true);
				setBoMediaHeight();
				jQuery(window).scrollTop(whereiwas);
			},200);
		})

	})

	loadMoreBlog(true);



	reBuildBlogOverview(0);
	setBoMediaHeight()

	jQuery('.bo-posts-list').waitForImages(function() {
		setTimeout(function() {
			reBuildBlogOverview(0.8);
			setBoMediaHeight()
		},100);
	})


	var bbtimer;

	jQuery(window).resize(function() {
		var bod = jQuery('body');
		if (jQuery('.container').first().width()!=bod.data('bo-lastcontainerwidth')) {
					bod.data('bo-lastcontainerwidth',jQuery('.container').first().width());
					clearTimeout(bbtimer);
					setBoMediaHeight()
					//bbtimer = setTimeout(function() {
						reBuildBlogOverview(0.8);

					//},100);
		}
	});

}






/******************************
	-	LOAD MORE BLOG ITEMS	-
********************************/
function loadMoreBlog(firsttime) {


	jQuery('.bo-posts-list').each(function() {

		var bolist = jQuery(this);
		var nextamount;

		if (firsttime)
			nextamount = bolist.data('showfirst');
		else
			nextamount = bolist.data('showatonce');

		if (nextamount==0 || nextamount ==undefined) nextamount = 9999;

		jQuery('#unvisibleblogholder').find('.bo-post').each(function(i) {

			if (i<nextamount) {
					var bpost = jQuery(this);

					// APPEND THE MEDIA ITSELF

					// CHANGE THE SOURCE OF THE ITEM
					bpost.find('.bo-mediaholder').each(function() {
						var bom = jQuery(this);
						bom.append(bom.find('.be-mediasource').data('mediasrc'));
						var img = bom.find('.bo-seomedia');
						if (img.length>0) {
							var src = img.attr("src");
							bom.append('<div class="bo-media" style="background:url('+src+')"></div>');
						}
					})

					bpost.appendTo(jQuery('.bo-posts-list')).css({top:bolist.height()+1500});
					if (!firsttime) bpost.addClass("bo-newloadedpost")


			}

		})
	});


}




/******************************************
	-	SET HEIGHT OF IMAGE CONTAINERS	-
******************************************/

function setBoMediaHeight() {
	jQuery('.bo-post.bo-left, .bo-post.bo-right').each(function(i) {

		var bo = jQuery(this);
		var bom = bo.find('.bo-mediaholder');
		var bod = bo.find('.bo-details');
		bom.css({height:bod.outerHeight()+"px"});
	})
}




/******************************
	-	BUILD BLOGOVERVIEW	-
********************************/

function reBuildBlogOverview(speed,novisible) {

	jQuery('.bo-posts-list').each(function() {

			var bolist = jQuery(this);
			var lefttop = 0;
			var righttop = 0;
			var curtop = 0;
			var lastyear ="";
			var lastmonth = "";
			var curdatetop = 110;
			var dayclass="toleft"
			var offs = 95;
			var mobile=0;
			if (jQuery(window).width()<1200) offs=70;
			if (jQuery(window).width()<769) mobile=1;
			var galleryheight=0;

			var itemoffset =40;
			if (mobile==1) itemoffset=0;

			bolist.find('.bo-post').each(function(i) {
				var nextpost = jQuery(this);
				var cday = jQuery(this).data('day');
				var cmon = jQuery(this).data('month');
				var cyea = jQuery(this).data('year');

				//////////////////////////////////////
				// ADD NEW YEAR / MONTH DIVIDER 	//
				//////////////////////////////////////
				if (cyea!=lastyear || cmon !=lastmonth && mobile!=1) {
					if (jQuery('#'+cmon+cyea).length==0)
						bolist.append('<div class="bo-datedivider" id="'+cmon+cyea+'" ><p class="bo-month">'+cmon+'</p><p class="bo-year">'+cyea+'</p></div>');
					lastyear= cyea;
					lastmonth = cmon;
					var bodd = jQuery('#'+cmon+cyea);



					if (lefttop>righttop)
					   righttop = lefttop
					else
					   lefttop = righttop;

					TweenLite.to(bodd,speed,{top:lefttop,transformPerspective:500,ease:Power3.easeOut});

					curdatetop = lefttop+50;

					if (curdatetop==100) curdatetop = 110;

					lefttop = lefttop + 90;
					righttop = righttop + 90;
				}

				////////////////////////////////////////////
				// 		ADD THE MEDIA IN POSITION	      //
				// PUT IT IN THE LEFT SPAN OR RIGHT SPAN //
				////////////////////////////////////////////
				if (lefttop<=righttop) {
							// CHECK IF WE ARE ON MOBILE, AND IF NEW LOADED POST ADDED TO ANIMATE IT IN
							if (mobile!=1) {
								if (novisible==true && nextpost.hasClass("bo-newloadedpost")) {
									TweenLite.fromTo(nextpost, 0.8, {x:0,transformPerspective:500,top:lefttop+"px",transformOrigin:"-20% 50%",opacity:0,z:-190,rotationY:90},{rotationY:0,z:0,opacity:1,ease:Power3.easeOut});
								} else {
									TweenLite.to(nextpost,speed,{x:0,transformPerspective:500,top:lefttop+"px",ease:Power3.easeOut});

								}
							} else {
								TweenLite.to(nextpost,speed,{x:0,transformPerspective:500,top:"0px",ease:Power3.easeOut});
							}


							curtop = lefttop;

							lefttop = lefttop + nextpost.height() + itemoffset;


							bolist.css({height:lefttop+"px"});

							dayclass="toleft";
				} else {
							// CHECK IF WE ARE ON MOBILE, AND IF NEW LOADED POST ADDED TO ANIMATE IT IN
							if (mobile!=1)	{
								if (novisible==true && nextpost.hasClass("bo-newloadedpost")){
									TweenLite.fromTo(nextpost, 0.8, {x:bolist.width()/2+offs,transformPerspective:500,top:righttop+"px",transformOrigin:"120% 50%",opacity:0,z:-190,rotationY:-90},{rotationY:0,z:0,opacity:1,ease:Power3.easeOut});
								} else {
									TweenLite.to(nextpost,speed,{x:bolist.width()/2+offs,transformPerspective:500,top:righttop+"px",ease:Power3.easeOut});

								}

							} else {
		 						TweenLite.to(nextpost,speed,{x:0,transformPerspective:500,top:"0px",ease:Power3.easeOut});
		 					}

							curtop=righttop;
							righttop = righttop + nextpost.height() + itemoffset;

							bolist.css({height:righttop+"px"});
							dayclass="toright";
				}

				if (nextpost.hasClass("bo-newloadedpost")) nextpost.removeClass("bo-newloadedpost");

				// IF WE ARE ON MOBILE, HEIGHT MUST BE SAME EVERYWHERE
				if (mobile==1) {
					if (lefttop>righttop)
					   righttop = lefttop
					else
					   lefttop = righttop;
				}




				///////////////////////////////////////
				// CALCULATE THE NEXT DAY POSITION  //
				///////////////////////////////////////
				var von = curtop+25;
				var bis = von + nextpost.height()-25;
				var nextdatetop = curdatetop + 60;

				if (nextdatetop < von) nextdatetop = von+10;
				if (nextdatetop >bis) nextdatetop = bis-10;

				curdatetop = nextdatetop;

				var idtxt = cmon+cyea+cday+"-"+i
				if (jQuery('#'+idtxt).length==0)
					bolist.append('<div id="'+idtxt+'" class="bo-daydivider"><p class="bo-day">'+cday+'.</p></div>');

				var bodad = jQuery('#'+idtxt);
				bodad.removeClass("toright").removeClass("toleft").addClass(dayclass)

				bodad.data('maxbottom',bis);
				bodad.data('topme',nextdatetop);

			})


			////////////////////////////////
			//  IS THERE MORE TO LOAD ??  //
			////////////////////////////////
			if (jQuery('#unvisibleblogholder').find('.bo-post').length>0) {
					if (jQuery('#bo-loadmorebutton').length==0)
						bolist.append('<div class="bo-datedivider" id="bo-loadmorebutton" ><div class="emptyholder"></div><p class="bo-month">'+goodweb_theme_vars.load+'</p><p class="bo-year">'+goodweb_theme_vars.more+'</p></div>');

					var bodd = jQuery('#bo-loadmorebutton');
					bodd.appendTo(bolist);



					if (lefttop>righttop)
					   righttop = lefttop
					else
					   lefttop = righttop;

					TweenLite.to(bodd,0.8,{top:lefttop,transformPerspective:500,ease:Power3.easeOut});

					curdatetop = lefttop+50;


					bodd.data('topme',curdatetop);
					TweenLite.to(bolist,0.8,{height:curdatetop+"px",transformPerspective:500,ease:Power3.easeOut});



					if (curdatetop==100) curdatetop = 110;

					lefttop = lefttop + 90;
					righttop = righttop + 90;



				} else {
					jQuery('#bo-loadmorebutton').remove();
				}


			////////////////////////////////
			//ReAdjusting of Day Circles  //
			////////////////////////////////
			if (mobile!=1) {

				var lastpos = 0; var lastmaxb = 0; var lastbod;
				bolist.find('.bo-daydivider').each(function() {
					var bod = jQuery(this);
					var curpos = bod.data('topme');//bod.position().top;
					var bot = bod.data('maxbottom');

					if (lastpos!=0) {

						var realbottom = lastmaxb>curpos ? curpos-50 : lastmaxb-50;
						var dif = (realbottom-lastpos) / 2;
						//lastbod.css({top:lastbod.position().top+dif+"px"});
						TweenLite.to(lastbod,speed,{top:lastbod.data('topme')+dif,transformPerspective:500,ease:Power3.easeOut});

					}

					lastpos = curpos;
					lastmaxb = bot;
					lastbod = bod;
				})

				if (lastpos!=0) {
						var realbottom = lastmaxb-25;
						var dif = (realbottom-lastpos) / 2;
						//lastbod.css({top:lastbod.position().top+dif+"px"});
						TweenLite.to(lastbod,speed,{top:lastbod.data('topme')+dif,transformPerspective:500,ease:Power3.easeOut});
					}

				try {
					galleryheight = lastbod.data('topme')+dif+25;
					if (jQuery('#bo-loadmorebutton').length>0) galleryheight = jQuery('#bo-loadmorebutton').data('topme')+20;

					jQuery('.bo-middledivider').height(galleryheight);
				} catch (e) {}
			}

	});


}












/**************************************
	-	INPUT FIELDS INITIALISATION	-
**************************************/
	function initInputFields() {

				jQuery('#Form_Search').focus(function() {

					jQuery('#searchform').addClass("onfocus");
				})

				jQuery('#Form_Search').blur(function() {
					jQuery('#searchform').removeClass("onfocus");
				})

				jQuery('body, html, #allcontent').click(function() {

					jQuery('#searchfrom').blur();
				})


			// Check the Search value on Standard
				jQuery(".prepared-input, .searchinput").each(function() {
					var field=jQuery(this);
					field.data('standard',field.val());
				});


				jQuery(".prepared-input, .searchinput").focus(function(){
					var $this = jQuery(this);

					$this.val($this.val()== $this.data('standard') ? "" : $this.val());
				});
				jQuery(".prepared-input, .searchinput").blur(function(){
					var $this = jQuery(this);
					$this.val($this.val()== "" ? $this.data('standard') : $this.val());
				});
		}














/******************************
	-	INIT SERVICE ANIMS	-
********************************/
function initModuleAnims() {

	var winw = jQuery('.container').first().width()/2;




	// PREAPARE ANIMATIONS
	jQuery('.module-title, .headline-title').addClass("gw-rft");

	// PREPARE BLOG ELEMENTS ANIMATIONS
	jQuery('.bo-datedivider, .bo-daydivider ').each(function(i) {
		 jQuery(this).data('delay',i*30).addClass("gw-zin");
	});


	// PREPARE BLOG ELEMENT ANIMATIONS
	jQuery('.bo-post').each(function(i) {
		 var bop = jQuery(this)
		 bop.data('delay',i*30)
		 if (bop.position().left<winw)
		 	bop.addClass("gw-rfl")
		 else
		 	bop.addClass("gw-rfr")
	});

	// PREPARE FILTER ELEMENTS
	jQuery('.mediawall-filters, .nav.nav-tabs').each(function() {
		jQuery(this).find('li').each(function(i) {
		 jQuery(this).data('delay',i*100).addClass("gw-sfr");
		});
	});

	jQuery('.mediawall-gallery').addClass("gw-sfl");

	// THE SPANS ANIMATION PREPARAION
	jQuery('.row, .row-fluid').each(function() {
		if (jQuery(this).closest('#subfooter').length==0 && jQuery(this).closest('#footer').length==0 &&  jQuery(this).parent().attr('id')!="maincontent") {
			var roww = jQuery(this).width()/2 - 50;
			jQuery(this).find('.span1, .span2, .span3, .span4, .span5, .span6, .span7, .span8, .span9, .span10, .span11, .span12 ').each(function(i){

					 var bop = jQuery(this)

					 if (bop.find('.fbuilder_row').length>0 || bop.hasClass('thesidebar')) {

					 } else {
						 bop.data('delay',i*50)

						 if (bop.position().left<roww)
						 	bop.addClass("gw-rfl")
						 else
						 	bop.addClass("gw-rfr")
					}
			})
		}
	})

	jQuery('.thesidebar .widget').each(function(i) {
		 var bop = jQuery(this);
		  bop.data('delay',(i+1)*50)

		 if (bop.position().left<winw)
		 	bop.addClass("gw-rfl")
		 else
		 	bop.addClass("gw-rfr")

	})

	// THE FBUILDER ROWS ANIMATION PREPARAION
	jQuery('.fbuilder_row').each(function() {
			var roww = jQuery(this).width()/2 - 50;
			var i=0;
			jQuery(this).find('.fbuilder_column').each(function(){
				if (!jQuery(this).hasClass("fbuilder_column-1-1")) {

					 var bop = jQuery(this);

					 bop.data('delay',i*50)

					 if (bop.position().left<roww)
					 	bop.addClass("gw-rfl")
					 else
					 	bop.addClass("gw-rfr")


					 i=i+1;
				}
			})

	});



	// THREE, FOUR AND FIFTH COLUMNS FOR PRICETABLES
	jQuery('.pricingtable').each(function() {
		jQuery(this).find('li').each(function(i){
				 jQuery(this).data('delay',i*10).addClass("gw-zin");

		})
	})

	// ACCORDION GROUP ANIMATIONS
	jQuery('.accordion').each(function() {
		jQuery(this).find('.accordion-group ').each(function(i){
				 jQuery(this).data('delay',i*10).addClass("gw-zin");

		})
	})

	addAnimateEffects();

}
/**********************************
	-	ADD ANIMATE EFFECTS	-
***********************************/

function addAnimateEffects() {
	jQuery('.gw-rfl, .gw-zin, .gw-rfr, .gw-sfb, .gw-rft, .gw-sfl, .gw-sfr, .gw-rsfl, .gw-rsfr').each(function() {
		var mo = jQuery(this);

		if (mo.css('position')!="absolute")
			mo.addClass("relative");


		if (mo.hasClass("gw-rfl"))
			mo.data('anim',TweenLite.fromTo(mo, 0.8, {transformStyle:"flat",transformOrigin:"-20% 50%",opacity:0,z:-19,transformPerspective:500,rotationY:90},{rotationY:0,z:0,opacity:1,ease:Power3.easeOut,
					 onComplete:function() { mo.removeClass("gw-rfl")}}));

		else

		if (mo.hasClass("gw-rfr"))
			mo.data('anim',TweenLite.fromTo(mo, 0.8, {transformStyle:"flat",transformOrigin:"120% 50%",opacity:0,z:-19,transformPerspective:500,rotationY:-90},{rotationY:0,z:0,opacity:1,ease:Power3.easeOut,
					 onComplete:function() { mo.removeClass("gw-rfr")}}));

		else

		if (mo.hasClass("gw-rft"))
			mo.data('anim',TweenLite.fromTo(mo, 1.2, {transformStyle:"flat",transformOrigin:"center -20px",opacity:0,z:-50,transformPerspective:500,rotationX:90,y:-20},{x:0,rotationX:0,y:0,z:0,opacity:1,ease:Power3.easeOut,
					 onComplete:function() { mo.removeClass("gw-rft")}}));

		else

		if (mo.hasClass("gw-zin"))
			mo.data('anim',TweenLite.fromTo(mo, 1.4, {transformStyle:"flat",transformOrigin:"center -20px",opacity:0,z:30,transformPerspective:500,rotationX:100,scale:0},{rotationX:0,z:0,scale:1,opacity:1,ease:Back.easeOut,
					 onComplete:function() { mo.removeClass("gw-zin")}}));


		else


		if (mo.hasClass("gw-sfb"))
			mo.data('anim',TweenLite.fromTo(mo, 0.8, {transformStyle:"flat",opacity:0,transformPerspective:500,y:100},{y:0,opacity:1,ease:Power3.easeOut,
					 onComplete:function() { mo.removeClass("gw-sfb")}}));

		else

		if (mo.hasClass("gw-sfl"))
			mo.data('anim',TweenLite.fromTo(mo, 0.8, {transformStyle:"flat",opacity:0,transformPerspective:500,x:-100},{x:0,opacity:1,ease:Power3.easeOut,
					 onComplete:function() { mo.removeClass("gw-sfl")}}));

		else

		if (mo.hasClass("gw-sfr"))
			mo.data('anim',TweenLite.fromTo(mo, 0.8, {transformStyle:"flat",opacity:0,transformPerspective:500,x:100},{x:0,opacity:1,ease:Power3.easeOut,
					onComplete:function() { mo.removeClass("gw-sfr")}}));


		mo.data('anim').seek(0).pause()

		setTimeout(function() {
				mo.waypoint(function(direction) {
					if (direction=="down") {
						var delay = mo.data('delay');
						if (delay==undefined) delay= Math.round(Math.random()*300+100);

						setTimeout(function() {
							mo.data('anim').restart();
						},delay)

						mo.waypoint('destroy');
					}
				}, { offset: '82%' });
		},500);
	});


}

/******************************
	-	INIT SKILL	-
********************************/
function initSkills() {
	jQuery('.skill-scale').each(function() {
		var sk = jQuery(this);
		sk.append('<div class="skill-underlay"><div class="skill-overlay" style="width:0%"></div></div>');
	//	sk.find('.skill-overlay').css({width:sk.data('scale')+"%"}).append('<div class="skillproc">'+sk.data("scale")+'%</div>');

		
		if (!is_mobile())

				sk.waypoint(function(direction) {
					if (direction=="down") {
						sk.find('.skill-underlay .skill-overlay:first').css({width:sk.data('scale')+"%"}).append('<div class="skillproc">'+sk.data("scale")+'%</div>');
						sk.waypoint('destroy');
					}

				}, { offset: '90%' });
		else
		    	sk.find('.skill-underlay .skill-overlay:first').css({width:sk.data('scale')+"%"}).append('<div class="skillproc">'+sk.data("scale")+'%</div>'); 
	})


}


/******************************
	-	ACCORDION COLLAPS	-
********************************/
function initAccordions() {
	 jQuery('.accordion-toggle').each(function() {
		 var actg = jQuery(this);
		 actg.click(function() {
			 var ac = jQuery(this).closest('.accordion');
			 ac.find('.accordion-toggle').addClass("collapsed");
			 ac.find('.in.collapse').each(function() {
				var accnt = jQuery(this);
				var actg = ac.find(accnt.data('parent')).find('.accordion-toggle');
				actg.removeClass("collapsed")
			 })
		 })
	 })
}

/******************************
	-	CHECK IE AND IE9 	-
********************************/

function checkie() {
	 var ie = !jQuery.support.opacity;

	// CHECK THE jQUERY VERSION
	var version = jQuery.fn.jquery.split('.'),
		versionTop = parseFloat(version[0]),
		versionMinor = parseFloat(version[1]),
		versionIncrement = parseFloat(version[2] || '0');

	if (versionTop>1) opt.ie=false;

	return ie;

}

function checkie9() {
	 return (document.documentMode == 9);
}


/***********************************************
	-	CREATE PAGINATION FOR ISOTOPE	-
************************************************/

function buildPagination(mw,sfilter) {

	  var mwisotope = mw.find('.mediawall-gallery');
	   mw.find('.mediawall-filter-wrapper.media-pagination li').remove();


	  // Amounts of Filtered Items
	  var fiamount = mw.find(sfilter).length;

	  // Max Visible Items
	  var mamount = mwisotope.data('maxshownitems');


	  // KILL THE PAGINATION
	  for (var i=0;i<20;i++)
		mwisotope.find('.mwpage'+i).removeClass("mwpage"+i)

	  // CREATE NEW PAGINATION
	  var ci = 0;
	  var cp = 1;
	  mwisotope.find('.item').each(function() {
		  var item = jQuery(this);
	 	  if (item.hasClass(sfilter)) {
			  ci=ci+1;
			  if (ci > mamount) {
				  ci=1;
				  cp=cp+1;
			  }
			  item.addClass("mwpage"+cp);
			}
	  });


	  // CREATE THE PAGINATION BUTTONS
	  if (cp>1) {
		  if (mw.find('.mediawall-filter-wrapper.media-pagination').length==0)
		    mw.append('<article class="mediawall-filter-wrapper media-pagination"><ul class="mediawall-filters"></ul><div class="clear"></div></article>');
		 for (i=1;i<=cp;i++) {
			mw.find('.media-pagination .mediawall-filters').append('<li class="media-pagination-filter-button"><a class="mediawall-filter media-pagination-filter-button" data-filter="mwpage'+i+'">'+i+'</a></li>');
		}
		mw.find('.media-pagination .mediawall-filter').first().addClass("selected");
	  }
	  mw.find('.media-pagination .mediawall-filter').unbind("click");
	  mw.find('.media-pagination .mediawall-filter').on("click",function() {
			 var filter = jQuery(this);
			 var fgroup = filter.closest('ul');
			 fgroup.find('.mediawall-filter').removeClass("selected");
			 filter.addClass("selected");

			 var filters="";
			 mw.find('.mediawall-filter.selected').each(function() {
				 filters=filters+'.'+jQuery(this).data('filter');
			 })
			 mwisotope.isotope({filter:filters});
			 return false;
		})




}

/******************************
	-	INIT MEDIA WALLS	-
********************************/
function initMediaWall() {

	// POSITION THE MEDIAWALL CONTENT HERE
	jQuery('.mediawall-content').each(function() {
				var mc = jQuery(this);
				mc.css({marginTop:(mc.parent().height()-mc.outerHeight())/2+"px"});
			})

			var mgtimer;
	// RESIZE FUNCTION OF MEDIAWALL CONTENT
	jQuery(window).resize(function() {
				clearTimeout(mgtimer);
				mgtimer = setTimeout(function() {
					jQuery('.mediawall-content').each(function() {
						var mc = jQuery(this);
						mc.css({marginTop:(mc.parent().height()-mc.outerHeight())/2+"px"});
					})
				},1000)
			});

    jQuery('.mediawall').each(function() {

	    	// CATCH THE RELEVANT ITEMS
	    	var mw = jQuery(this);
			var mwisotope = mw.find('.mediawall-gallery');
			var cpage = ".mwpage1";
			mwisotope.find('.item').addClass("allitem");


			// SELECTED FILTER
			var sfilter = mw.find('.mediawall-filter.selected').data('filter');

			buildPagination(mw,sfilter);

			// SET THE FILTES WHICH HAS BEEN SELECTED ON THIS GALLERY
			var filters="";
			 mw.find('.mediawall-filter.selected').each(function() {
				 filters=filters+'.'+jQuery(this).data('filter');
			 })

			// INITIALISE THE ISOTOPE GALLERY
			mwisotope.isotope({
							  // options
							  itemSelector : '.item',
							  layoutMode : 'fitRows',
							  filter:filters
							});

			mwisotope.waitForImages(function() {
				mwisotope.isotope('reLayout');
				mw.find('.mediawall-content').each(function() {
					var mc = jQuery(this);
					mc.css({marginTop:(mc.parent().height()-mc.outerHeight())/2+"px"});
				})
			})

			// FILTERING AND AUTO PAGINATIONG OF MEDIA WALL
			mw.find('.mediawall-filter').on("click",function() {
				 var filter = jQuery(this);
				 var fgroup = filter.closest('ul');
				 fgroup.find('.mediawall-filter').removeClass("selected");
				 filter.addClass("selected");
				 if (!filter.hasClass("media-pagination-filter-button")) {
				 	buildPagination(mw,filter.data('filter'));
				 }

				 var filters="";
				 mw.find('.mediawall-filter.selected').each(function() {
					 filters=filters+'.'+jQuery(this).data('filter');
				 })
				 mwisotope.isotope({filter:filters});

				 // MAKE SURE THAT ONLY ITEMS ARE IN THE LIGHTBOX WHICH ARE ALSO FILTERED
				 jQuery('.isotope-item').each(function(q) {
				 	 // PREPARE THE RIGHT FILTER
					 var mainfilter = filters.split('.');

					 curfilter ="allitem";
					 jQuery.each(mainfilter,function(index,filter) {
						 if (filter.length>0 && filter.split('mwpage').length<2) {
							 curfilter = filter;
						 }
					 })
					 // CHECK IF FILTER EXIST AND MARK THE ELEMENTS
					 var item = jQuery(this);

					 if (!item.hasClass(curfilter)) {

						 item.find('.punchbox').addClass("puncbox-notactive").removeClass("punchbox")
					 } else {
						 item.find('.puncbox-notactive').removeClass("puncbox-notactive").addClass("punchbox")
					 }
				 })
		 		 return false;
			})

			// PUT THE CONTENT OF THE ENTRIES IN THE MIDDLE
			mw.find('.mediawall-content').each(function() {
				var mc = jQuery(this);
				mc.css({marginTop:(mc.parent().height()-mc.height())/2+"px"});
			})

			// RESIZE ACTIVITY
			var mgtimer;
			jQuery(window).resize(function() {
				clearTimeout(mgtimer);
				mgtimer = setTimeout(function() {
					mwisotope.isotope('reLayout');
				},1000)
			});


			// HOVER ACTIVITY
			mwisotope.find('.item').each(function() {
				 var media = jQuery(this);
			     var mc = media.find('.mediawall-mediacontainer');
			     var boxshad = "0px 0px 0px 0px rgba(0,0,0,0)";
				 if (jQuery('body').hasClass("gw_light")) boxshad = "0px 0px 0px 0px rgba(0,0,0,0)";
			     TweenLite.set(mc,{boxShadow:boxshad});
			});



			mwisotope.find('.item').hover(

					function() {

					    var media = jQuery(this);
					    var mc = media.find('.mediawall-mediacontainer');
					    var mo = media.find('.mediawall-overlay');
					    var mct = media.find('.mediawall-content');
					    var mlb = media.find('.mediawall-lightbox');
					    var mli = media.find('.mediawall-link');
						var boxshad = "0px 0px 25px 0px rgba(0,0,0,0.5)";
						if (jQuery('body').hasClass("gw_light")) boxshad = "0px 0px 25px 0px rgba(0,0,0,0.1)"


						var w = mc.width();
						var h = mc.height();
						var w=((w*1.15)-w)/2;
						var h=((h*1.15)-h)/2;
						if (isIE(8)) {
							w=0;h=0;
						}

					    TweenLite.to(media,0.4,{zIndex:100});
					    TweenLite.fromTo(mo,0.4,{opacity:0},{display:"block",opacity:1,ease:Power3.easeOut});
					    TweenLite.fromTo(mct,0.4,{transformPerspective:500,scale:1.2,z:10,opacity:0},{scale:1,display:"block",opacity:1,z:1,ease:Power2.easeOut});
						TweenLite.fromTo(mlb,0.6,{scale:0.8,transformOrigin:"center top",opacity:0,transformPerspective:500,rotationX:90,x:w,y:h-10},{scale:1,rotationX:0,x:w,y:h,display:"block",opacity:1,ease:Power3.easeOut});
						TweenLite.fromTo(mli,0.8,{scale:0.8,transformOrigin:"center top",opacity:0,transformPerspective:500,rotationX:90,x:w,y:h-10},{scale:1,rotationX:0,x:w,y:h,display:"block",opacity:1,ease:Power3.easeOut});
					    TweenLite.to(mc,0.6,{scale:1.15,transformPerspective:500,boxShadow:boxshad,ease:Power3.easeOut,overwrite:"all"});

						//mc.transition({scale:1.2,duration:500});

					},
					function() {

						var media = jQuery(this);
					    var mc = media.find('.mediawall-mediacontainer');
						var mo = media.find('.mediawall-overlay');
						var mct = media.find('.mediawall-content');
						var mlb = media.find('.mediawall-lightbox');
					    var mli = media.find('.mediawall-link');

					    var boxshad = "0px 0px 0px 0px rgba(0,0,0,0)";
						if (jQuery('body').hasClass("gw_light")) boxshad = "0px 0px 0px 0px rgba(0,0,0,0)"

					    TweenLite.to(media,0.2,{zIndex:1});
				   	    TweenLite.to(mo,0.3,{display:"none",opacity:0});
				   	    TweenLite.to(mct,0.5,{scale:0.5,transformPerspective:500,opacity:0,display:"none"});
						TweenLite.to(mlb,0.4,{scale:0.8,display:"none",opacity:0,transformPerspective:500,rotationX:90,ease:Power3.easeOut,overwrite:"all"});
						TweenLite.to(mli,0.4,{scale:0.8,display:"none",opacity:0,transformPerspective:500,rotationX:90,ease:Power3.easeOut,overwrite:"all"});
					    TweenLite.to(mc,0.3,{scale:1,transformPerspective:500,rotationY:0,rotationX:0,boxShadow:boxshad,ease:Power4.easeOut,overwrite:"all"});

						//mc.transition({scale:1,duration:500});

			})

			//INITIALISIING THE PUNCHBOX


		  	  var aplay = mw.data('autoplay');
		  	  var aplaydelay = mw.data('autoplaydelay');
		  	  if (aplay==undefined) aplay = "disabled";
		  	  if (aplaydelay==undefined) aplaydelay = 5000;


  			  var api = mw.punchBox({
				// SELECTOR
				items:'.punchbox',

				// NAVIGATION SETTINGS
				navigation:{
					container:'insidemedia',		// Put Nav inside or outside the Container
					position:'dettached',			// Dettached, topleft, topright, top, bottomleft,bottom,bottomright
					autoplay:aplay,					// Enable / Disable Navigation
					autoplaydelay:aplaydelay,		// Timer after how many ms the Slide changes*/
				},

				// THE META INFO
				metaInfo:{
					showMeta:true,
					orderMarkup:"%n / %m",
					metaMarkup:'<div class="pb-metawrapper"><div class="pb-title">%title%</div><div class="pb-metadata">%metadata%</div><div class="pb-order">%ordermarkup%</div></div>',
				},

				// THE CALLBACKS
				callbacks:{
					ready:function(slide,oldslide) {
						//alert("ready"+slide.html());
					},
					beforeAnim:function(slide,oldslide) {
						//alert("beforeAnim");
					},
					afterAnim:function(slide,oldslide) {
						//alert("afterAnim");
					}
				}
			})

			// OPEN ONE ITEM AT START
			//api.open({items:'.punchbox:eq(1)'});

			//setTimeout(function() {api.close();},4000);

			// API BINDS TO THE LIGHTBOX
			api.bind('pause',function() {
				//alert("pause");
			})

			api.bind('resume',function() {
				//alert("pause");
			})

			api.bind('beforeanim',function() {
				//alert("pause");
			})
			api.bind('afteranim',function() {
				//alert("pause");
			})

	});



}


/******************************
	-	initShowbizSimple	-
********************************/

function initShowbizSimple() {

	// HOVER ACTIVITY

			jQuery('.mediawallshowbiz').find('li').each(function() {
				jQuery(this).hover(

					function() {
						  var media = jQuery(this);
					    var mc = media.find('.mediawall-mediacontainer');
					    var mo = media.find('.mediawall-overlay');
					    var mct = media.find('.mediawall-content');
					    var mlb = media.find('.mediawall-lightbox');
					    var mli = media.find('.mediawall-link');
						var boxshad = "0px 0px 25px 0px rgba(0,0,0,0.5)";
						if (jQuery('body').hasClass("gw_light")) boxshad = "0px 0px 25px 0px rgba(0,0,0,0.1)"

						mct.css({marginTop:(mc.height()-mct.outerHeight())/2+"px"});

					    TweenLite.to(media,0.4,{zIndex:100});
					    TweenLite.fromTo(mo,0.4,{opacity:0},{display:"block",opacity:1,ease:Power3.easeOut});
					    TweenLite.fromTo(mct,0.4,{transformPerspective:500,scale:1.2,z:10,opacity:0},{scale:1,display:"block",opacity:1,z:1,ease:Power2.easeOut});
						TweenLite.fromTo(mlb,0.6,{scale:0.8,transformOrigin:"center top",opacity:0,transformPerspective:500,rotationX:90},{scale:1,rotationX:0,display:"block",opacity:1,ease:Power3.easeOut});
						TweenLite.fromTo(mli,0.8,{scale:0.8,transformOrigin:"center top",opacity:0,transformPerspective:500,rotationX:90},{scale:1,rotationX:0,display:"block",opacity:1,ease:Power3.easeOut});


						//mc.transition({scale:1.2,duration:500});

					},
					function() {

						var media = jQuery(this);
					    var mc = media.find('.mediawall-mediacontainer');
						var mo = media.find('.mediawall-overlay');
						var mct = media.find('.mediawall-content');
						var mlb = media.find('.mediawall-lightbox');
					    var mli = media.find('.mediawall-link');
					    TweenLite.to(media,0.2,{zIndex:1});
				   	    TweenLite.to(mo,0.3,{display:"none",opacity:0});
				   	    TweenLite.to(mct,0.5,{scale:0.5,transformPerspective:500,opacity:0,display:"none"});
						TweenLite.to(mlb,0.4,{scale:0.8,display:"none",opacity:0,transformPerspective:500,rotationX:90,ease:Power3.easeOut,overwrite:"all"});
						TweenLite.to(mli,0.4,{scale:0.8,display:"none",opacity:0,transformPerspective:500,rotationX:90,ease:Power3.easeOut,overwrite:"all"});



						//mc.transition({scale:1,duration:500});

					})
			})

}


// RESET THE CURRENT MENU BUTTON SIZE
					function resetMenuButtonContent() {

						if (jQuery(window).width()>480 && jQuery('#current-menu-txt').text() == "MENU") {
											jQuery('#current-menu-txt-new').remove();
											var tx = jQuery('menu .active').text();
											if (tx=="") tx = jQuery('body').data('menutitle');
											jQuery('#current-menu-txt').html(tx);
											jQuery('#current-menu-txt').data('curhtml',tx);
											jQuery('#current-menu-txt').parent().width(jQuery('#current-menu-txt').width()+65);

										}
										if (jQuery(window).width()<480 && jQuery('#current-menu-txt').html() != "MENU") {
											jQuery('#current-menu-txt-new').remove();
											jQuery('#current-menu-txt').html("MENU");
										}
										/*! MENU WIDTH IN SMALL VIEW */
										/*clearTimeout(moditimer)
										moditimer = setTimeout(function() {
												if (jQuery('#headermenuholder').width() + jQuery('#logo').width()>jQuery('#headerwrapper .container').width()) {

													var nwtxt = jQuery('#current-menu-txt').data('txt');
													jQuery('#current-menu-txt').html(nwtxt);
													for (var i=0;i<10;i++) {
														if (jQuery('#headermenuholder').width() + jQuery('#logo').width()>jQuery('#headerwrapper .container').width()) {
															nwtxt = nwtxt.substring(0,nwtxt.length-1);
															jQuery('#current-menu-txt').text(nwtxt+"...");
															jQuery('#current-menu-txt').parent().width(jQuery('#current-menu-txt').width()+65);
														}
													}

												} else {
													var nwtxt = jQuery('#current-menu-txt').data('txt');
													jQuery('#current-menu-txt').html(nwtxt);
													jQuery('#current-menu-txt').parent().width(jQuery('#current-menu-txt').width()+65);
													for (var i=0;i<10;i++) {
														if (jQuery('#headermenuholder').width() + jQuery('#logo').width()>jQuery('#headerwrapper .container').width()) {
															nwtxt = nwtxt.substring(0,nwtxt.length-1);
															jQuery('#current-menu-txt').text(nwtxt+"...");
															jQuery('#current-menu-txt').parent().width(jQuery('#current-menu-txt').width()+65);
														}
													}
												}
										},300);*/

					}
					

/*************************************
	-	SET MENU HEIGHT MENUONTOP	-
*************************************/

function setHeightOfMenuHolder() {
				var nheight = jQuery('#navigation').height();
				jQuery('#headerwrapper').css({paddingTop:30+nheight});
				jQuery('#mainmenuholder').css({height:nheight});

				if (jQuery(window).width()<481) {
					jQuery('#headerwrapper').css({paddingTop:"30px"});
					jQuery('#mainmenuholder').css({height:"100%"});
					resetMenuButtonContent();
				}

			}
			
			


/******************************
	-	Init MENU ITEMS	-
********************************/
function initMenuFunctions() {

	var mousespeed = 3;
	if (navigator.userAgent.indexOf('Mac OS X') != -1) {
	   mousespeed = 3;
	} else {
	  mousespeed = 30;
	}



	if (!is_mobile() && jQuery('body').hasClass("menuonleft")) {
		jQuery('#navigation').jScrollPane({mouseWheelSpeed:mousespeed});
	    var naviapi = jQuery('#navigation').data('jsp');
    } else {

    	if (is_mobile()) {
	    	jQuery('body').removeClass("menuontop");

    	}
    	// IF THE MENU IS ON TOP ACTIVATED, WE NEED SOME WORKFLOW
    	if (jQuery('body').hasClass("menuontop")) {

    		TweenLite.fromTo(jQuery('.menuontop menu'),0.4,{y:-200,autoAlpha:0},{autoAlpha:1, y:0, delay:1.2,ease:Power3.easeInOut});
			jQuery('#navigation').css({'overflow':'hidden'});

			jQuery(window).resize(function() {
				setHeightOfMenuHolder();
			})

			setHeightOfMenuHolder();


			jQuery(window).trigger("resize");

			jQuery('.menu-item-has-children .menu-item-has-children').hover(function() {
				var li = jQuery(this);
				li.removeClass("submenutoleft");

				var rightborder = jQuery(window).width() - (li.find('>ul').width()+li.offset().left);

				if (rightborder<200) {
					li.addClass("submenutoleft");

				}

			})

    	} else {
	      	jQuery('#navigation').css({'overflow':'scroll'});
	  	}
    }


    var navitimer;
	var menuul = jQuery('#navigation ul').first();

    // RESIZE WINDOW SHOULD RECALCULATE THE NAVIGATION HEIGHTS
    jQuery(window).resize(function() {
	    try {
	    	clearTimeout(navitimer);
			navitimer = setTimeout(function() {
				menuul.css({height:'auto'});
				if (menuul.outerHeight()>jQuery(window).height())
					menuul.css({height:menuul.outerHeight()+200+"px"});

				if (naviapi) naviapi.reinitialise();

			},450)
		} catch(e) {}
    });

	// PREPARE THE SUBMENUS FOR NAVIGATION
	jQuery('menu #navigation li').each(function (){
		if (jQuery(this).find('ul').length) {
			jQuery(this).addClass("hassubmenu");
		}
	})

	// PREPARE ALL SUBMENU NAVIGATION ANIMATIONS AND LINKS
	jQuery('.hassubmenu a').each(function() {
		jQuery(this).click(function() {
			try {
			setTimeout(function() {
				menuul.css({height:'auto'});
				if (menuul.outerHeight()>jQuery(window).height())
					menuul.css({height:menuul.outerHeight()+200+"px"});

				if (naviapi)  naviapi.reinitialise();

			},450)

		} catch(e) {}

			var li=jQuery(this).closest('li');

			if (li.hasClass("menuopen")) {
				li.find('ul').first().slideUp(400);
				li.removeClass("menuopen");
			} else {
				li.find('ul').first().slideDown(400);
				li.addClass("menuopen");
			}

			var topos = jQuery('body').data('topos');

			setTimeout(function() {
			 	jQuery(window).scrollTop(topos);
			 },1);
		})
	})

	// NAVIGATION SHOULD BE SHOWN
	jQuery('.header-menu-wrapper, .header-menu-closer').click(function() {
		var but = jQuery('#navigation');
		var menu = jQuery('menu');

		var allc = jQuery('#allcontent');
		var bgc = jQuery('.cinematic');
		var header = jQuery('#headerwrapper');

		try {
			setTimeout(function() {
				menuul.css({height:'auto'});
				if (menuul.outerHeight()>jQuery(window).height())
					menuul.css({height:menuul.outerHeight()+200+"px"});

				if (naviapi) naviapi.reinitialise();
			},150)

		} catch(e) {}

		// IF THE MENU SHOULD BE SHOWN ON A DEVICE WHICH HAS HIGHER RESOLUTION THAN 480PX
		if (jQuery(window).width()>480) {
				var wwi = jQuery(window).width();
				if (!but.hasClass("opened")) {
					jQuery('body').append('<div class="fakebgformobile"></div>');
					jQuery('body').data('topos',jQuery(window).scrollTop());
					var topos = jQuery('body').data('topos');
					allc.css({'position':'absolute',width:'100%',height:'100%',top:0+"px"});

					setMainContentMargin(24);
					menu.css({'display':'block'});
					TweenLite.fromTo(jQuery('.menucloser'),0.4,{opacity:0},{opacity:1,ease:Power2.easeOut,delay:1});
					TweenLite.to(allc,0.5,{left:228,ease:Power2.easeInOut,delay:0.1});
					TweenLite.to(bgc,0.5,{left:228,transformPerspective:10,ease:Power2.easeInOut,delay:0.1});
					if ((wwi<1250 && wwi>1200) || (wwi<1020 && wwi>980)) TweenLite.to(jQuery('.header-menu-wrapper'),0.3,{x:30});
					if (!is_mobile()) TweenLite.to(header,0.5,{left:228,transformPerspective:10,ease:Power2.easeInOut,delay:0.1});
					TweenLite.to(but,0.5,{width:228,left:(0),ease:Power2.easeInOut,overwrite:"true"});
					TweenLite.to(menu,0.5,{width:228,left:(0),ease:Power2.easeInOut,overwrite:"true"});
					but.addClass("opened");
					jQuery('.header-menu-wrapper').addClass("active");
					setTimeout(function() {
						if (but.hasClass("opened")) menu.css({'z-index':1001});
					},1100);
				} else {
					var topos = jQuery('body').data('topos');
					TweenLite.to(jQuery('.menucloser'),0.4,{opacity:0,overwrite:"true"});
					TweenLite.to(allc,0.5,{left:0,ease:Power2.easeInOut});
					TweenLite.to(bgc,0.5,{left:0,transformPerspective:10,ease:Power2.easeInOut});
					if (!is_mobile()) TweenLite.to(header,0.5,{left:0,transformPerspective:10,ease:Power2.easeInOut});
					but.removeClass("opened");
					jQuery('.header-menu-wrapper').removeClass("active");
					menu.css({'z-index':0});
					TweenLite.to(jQuery('.header-menu-wrapper'),0.3,{x:0, overwrite:"auto"});
					setTimeout(function() {
						menu.css({'display':'none'})
						setTimeout(function() {jQuery('.fakebgformobile').remove();},100);
						allc.css({'position':'static','width':'auto','height':'auto'});

						setMainContentMargin();

					},850);

				}
		} else {
				if (!but.hasClass("opened")) {
					menu.css({'z-index':1001});
					TweenLite.fromTo(menu,0.5,{left:0-jQuery(window).width(),width:jQuery(window).width()},{display:"block",left:(0),ease:Power2.easeInOut,delay:0.1});
					but.addClass("opened");
					jQuery('.header-menu-wrapper').addClass("active");

				} else {
					but.removeClass("opened");
					jQuery('.header-menu-wrapper').removeClass("active");
					TweenLite.to(menu,0.5,{left:0-jQuery(window).width(),width:jQuery(window).width(),ease:Power2.easeInOut,delay:0.1});
				}

		}
	});

	var wrto;
	jQuery(window).resize(function() {
		clearTimeout(wrto);
		wrto = setTimeout(function() {
				var wwi = jQuery(window).width();
				var but = jQuery('#navigation');
				var menu = jQuery('menu');

				var allc = jQuery('#allcontent');
				var bgc = jQuery('.cinematic');
				var header = jQuery('#headerwrapper');

				if (but.hasClass("opened")) {
					if (jQuery(window).width()>480) {
								TweenLite.to(allc,0.3,{left:(228),ease:Power2.easeInOut});
								TweenLite.to(bgc,0.3,{left:(228),transformPerspective:10,ease:Power2.easeInOut});
								if ((wwi<1250 && wwi>1200) || (wwi<1020 && wwi>980))
										TweenLite.to(jQuery('.header-menu-wrapper'),0.3,{x:30});
								else
										TweenLite.to(jQuery('.header-menu-wrapper'),0.3,{x:0});

								if (!is_mobile())
								  TweenLite.to(header,0.3,{left:(228),transformPerspective:10,ease:Power2.easeInOut});

								TweenLite.to(but,0.3,{width:228,left:(0),ease:Power2.easeInOut,overwrite:"true"});
								TweenLite.to(menu,0.3,{width:228,left:(0),ease:Power2.easeInOut,overwrite:"true"});
					} else {
								TweenLite.to(menu,0.3,{left:0,width:jQuery(window).width(),ease:Power2.easeInOut});


					}
				}
		},150);

	});




	/***************************************
		-	MENU INTERLINK	FOR DEEPLINK -
	******************************************/
	if (!isIE(8)) {
		var newpos = "#"+location.hash.split('#')[1];
		newpos = newpos.replace("!","");
		var linkarray = new Array();
		var offsethw = jQuery('#headerwrapper').outerHeight() + 60; // +100 Offset comes here


			var foundlink = false;
			jQuery('menu .internallink').each(function(i) {

				var id = "#"+jQuery(this).attr('href').split('#')[1];
				id = id.replace("!","");
				var element = jQuery(id);
				element.data('menutolink',jQuery(this));
				element.data('menutolink-id',i);
				linkarray.push(element);

				// SET THE WAYPOINT AT SCROLL UP / DOWN
				element.waypoint(function(direction) {


						if (direction=="down") {
							var menu = jQuery(this).data('menutolink');

						} else {
							var id = jQuery(this).data('menutolink-id');

							if (id==0) id=1;
							var menu = linkarray[id-1].data('menutolink');

						}



						var tx = menu.text();
						var id = "#"+menu.attr('href').split('#')[1];

						console.log("id shoud. "+id);

						id = id.replace("!","");
						jQuery('menu .active').removeClass("active");

						menu.closest('li').addClass("active");

						var idspec = id.replace("#",'#!');
						if(history.pushState) {
					    	history.pushState(null, null, idspec);
						}
						else {
						    location.hash = idspec;
						}



						if (jQuery(window).width()>480) {
							if (tx != jQuery('#current-menu-txt').text()) {
									jQuery('#current-menu-txt-new').remove();
									jQuery('.header-menu-wrapper').append('<div id="current-menu-txt-new">'+tx+'</div>');
									jQuery('#current-menu-txt').parent().width(jQuery('#current-menu-txt-new').width()+65);

									if (direction=="down") {
										TweenLite.fromTo(jQuery('#current-menu-txt-new'),0.4,{y:30,opacity:0},{y:0,opacity:1,ease:Power2.easeInOut,overwrite:"auto"});
										TweenLite.fromTo(jQuery('#current-menu-txt'),0.4,{y:0,opacity:1},{y:-30,opacity:0,ease:Power2.easeInOut,overwrite:"auto",onComplete:function() {
												jQuery('#current-menu-txt').html(tx);
												jQuery('#current-menu-txt-new').remove();
												TweenLite.to(jQuery('#current-menu-txt'),0,{y:0,opacity:1});
												jQuery('#current-menu-txt').parent().width(jQuery('#current-menu-txt').width()+65);

										}});
									} else {
										jQuery('#current-menu-txt').parent().width(jQuery('#current-menu-txt-new').width()+65);
										TweenLite.fromTo(jQuery('#current-menu-txt-new'),0.4,{y:-30,opacity:0},{y:0,opacity:1,ease:Power2.easeInOut,overwrite:"auto"});
										TweenLite.fromTo(jQuery('#current-menu-txt'),0.4,{y:0,opacity:1},{y:30,opacity:0,ease:Power2.easeInOut,overwrite:"auto",onComplete:function() {
												jQuery('#current-menu-txt').html(tx);
												jQuery('#current-menu-txt-new').remove();
												TweenLite.to(jQuery('#current-menu-txt'),0,{y:0,opacity:1});
												jQuery('#current-menu-txt').parent().width(jQuery('#current-menu-txt').width()+65);


										}});
									}
							}
						} else {
							jQuery('#current-menu-txt-new').remove();
							jQuery('#current-menu-txt').html("MENU");
						}






					}, { offset: '49%' }); // END OF WAYPOINTS

					var moditimer;
					// RESIZING FEATURE FOR MENUS
					jQuery(window).resize(function() {
								resetMenuButtonContent();
					});

					
					// IF DEEPLINK HAS BEEN SET IN URL, LETS SCROLL AND ACTIVATE MENUPOINT
					if (id==newpos) {
					   jQuery('menu .active').removeClass("active");
					   jQuery(this).closest('li').addClass("active");
					   setTimeout(function() {

							var element = jQuery(id);
							foundlink = true;

							setTimeout(function() {
								var topos = element.offset().top - offsethw;
								if (element.hasClass('noheadline')) topos = topos+40;
								var duri = 0;
								if (topos>1000) duri=200;
								if (topos>3000) duri=400;
								if (topos>5000) duri=700;

								jQuery('html, body').animate({scrollTop:topos},{duration:duri});
							},850);

							var idspec = id.replace("#",'#!');
							if(history.pushState) {
						    	history.pushState(null, null, idspec);
							}
							else {
							    location.hash = idspec;
							}

						},200,element);

					}

			})
		} // IE8 HACK

		if (!foundlink) jQuery('#current-menu-txt').parent().width(jQuery('#current-menu-txt').width()+65);
		jQuery('#current-menu-txt').data('txt',jQuery('#current-menu-txt').text());

		// SHOW THE HEADER WRAPPER
		TweenLite.fromTo(jQuery('#headerwrapper'),1,{opacity:0},{visibility:"visible",opacity:1,overwrite:"all",ease:Power3.easeIn,delay:1});


		// INTERNAL LINKS FROM BUTTONS
		jQuery('body').on("click",'a.smoothscroll',function() {
				var id = jQuery(this).attr('href');
				var element = jQuery(id);
				if (element.length!=0) {
					var topos = element.offset().top - offsethw;
					if (element.hasClass('noheadline')) topos = topos+40;
					var duri = topos/5;
					jQuery('html, body').animate({scrollTop:topos},{duration:duri});
					return false;
				} else {

				}

		})

	/***************************************
		-	MENU INTERLINK	CLICKS  -
	******************************************/
	jQuery('.internallink').each(function() {

		// THE CLICK EVENT ON THE INTERNALK MENU POINTS
		jQuery(this).click(function() {
				if (!jQuery(this).hasClass("nolink")) {
					var but = jQuery('#navigation');
					if (but.hasClass("opened"))
						jQuery('.header-menu-wrapper').click();
					var id = "#"+jQuery(this).attr('href').split('#')[1];
					var element = jQuery(id);
					if (element.length) {
						var offset = jQuery('#headerwrapper').outerHeight() +60// -100 for extra spacing;
						if (element.hasClass('noheadline')) offset = offset  -40;
						var topos = element.offset().top - offset;
						jQuery('menu .active').removeClass("active");
						jQuery(this).closest('li').addClass("active");
						setTimeout(function() {
							jQuery('html, body').animate({scrollTop:topos},{duration:1000});
						},350);

						if(history.pushState) {
						    history.pushState(null, null, id);
						}
						else {
						    location.hash = id;
						}
						return false;
					}
				}
			})
	});

	jQuery('.cinematic-down').click(function() {
		//jQuery('.internallink:eq(1)').click();
		var topos = jQuery(window).height() - 3* jQuery('#headerwrapper').height();
		jQuery('html, body').animate({scrollTop:topos},{duration:1000});
	})
}




/******************************
	-	MainContentTopMargin	-
********************************/
function setMainContentMargin(offset) {
	if (offset==undefined) offset=0
	var mc = jQuery('#maincontent');

	if (mc.data('topmargin')==undefined) mc.data('topmargin',parseInt(mc.css('marginTop'),0));
	var tm = mc.data('topmargin');


	if (jQuery('#cinematic-title-wrapper').length>0)
	 		mc.css({marginTop:(jQuery(window).height()+offset)+"px"});
	else
	 		mc.css({marginTop:(tm+offset)+"px"});
}

/******************************
	-	BACKGROUND SLIDER	-
********************************/
function initBackgroundSlider() {

		if (is_mobile()) {
			jQuery('.cinematic').css({width:'100.39%'});
		}


		jQuery('.cinematic').addClass("original");

		// PREPARING THE OVERHEADER
		if (!is_mobile()) {

			jQuery('.cinematic').clone().appendTo(jQuery('#allcontent')).addClass("overheader");
			jQuery('.overheader').removeClass("original");
			jQuery('overheader').data('contentholder',"")
			jQuery('.overheader').find('.slidercontent').each(function() {jQuery(this).remove();})

		} else {
			jQuery('#headerwrapper').css({position:'absolute'});
		}


	 	// PREPARE THE SLIDES
	 	jQuery('.cinematic').each(function() {

	 		var slider = jQuery(this);

	 		slider.data('atslide',0);

		 	if (slider.hasClass("original")) {
		 		setMainContentMargin();
		 		jQuery('#maincontent, #footer, #subfooter').css({display:"block"});

		 	}

	 		// COUNT THE AMOUNT OF SLIDES
	 		var slideamount = slider.find('ul li .slide-background-image').length;

	 		// WIDTH AND PROPORTIONS CALCULATIONS
	 		var containerw = 100*slideamount;
	 		var slidew = 100/slideamount;

			// SET FULL WIDTH OF UL
	 		slider.find('ul').first().css({'width':containerw+"%",left:'0px'});

	 		// FADE IN WHEN FIRST IMAGE IS LOADED
	 		if (slider.find('.slide-background-image').length>0)
		 		TweenLite.set(jQuery('.cinematic.original, .cinematic.overheader'),{opacity:0,transformPerspective:500});


		 	if (slider.find('.slide-background-image').length<2) jQuery('#cinematic-navigation').css({display:"none"});

	 		// PREPARE ALL BACKGROUNDS HERE
		 	slider.find('.slide-background-image').each(function(i) {
				 	var bg = jQuery(this);
				 	var li = bg.closest('li');
				 	li.css({width:slidew+"%"});
				 	var vis = "visible";
				 	if (i!=0) vis = "hidden"

				 	//SET THE BACKGROUND
				 	bg.append('<div class="cinematic-basicimage-wrapper"><div class="cinematicmedia_outter_wrapper"><div class="cinematicmedia_inner_wrapper" style="visible:'+vis+'"></div></div></div>');

				 	if (i==0) {

					 	var img = new Image();
						img.onload = function() {
							TweenLite.to(jQuery('.cinematic.original, .cinematic.overheader'),0.7,{opacity:1,ease:Power3.easeInOut});
						}
						img.src=bg.data('src');
				 	}

				 	var bgsize = bg.data('size') == undefined ? "cover" : bg.data('size');
				 	var bgsizeblur = bg.data('blursize') == undefined ? "cover" : bg.data('blursize');
				 	var bgrepeat = bg.data('containrepeat') == undefined ? "no-repeat" : bg.data('containrepeat');
				 	var bgblurrepeat = bg.data('containblurrepeat') == undefined ? "no-repeat" : bg.data('containblurrepeat');

				 	// IF IT IS AN IMG
				 	if (bg.data('repeatbg')!=true) {
 				 		bg.find('.cinematicmedia_inner_wrapper').append('<div class="cinematic-basicimage fullscreenimgs"></div>');
					 	bg.find('.cinematic-basicimage').css({backgroundRepeat:bgrepeat,backgroundImage:'url('+bg.data('src')+')',backgroundSize:bgsize,backgroundPosition:'center center',width:'100%',height:'100%'});
					 }

				 	// IF IT IS A TILED PNG
				 	if (bg.data('repeatbg') == true) {
					 	bg.find('.cinematicmedia_inner_wrapper').append('<div class="cinematic-basicimage fullscreenimgs"></div>');
					 	bg.find('.cinematic-basicimage').css({backgroundImage:'url('+bg.data("src")+')',backgroundPosition:'center center',width:'100%',height:'100%',backgroundRepeat:"repeat"});
					 }

				 	// CREATE / PREPARE THE BLURRED BG IMAGES
				 	bg.append('<div class="cinematic-blurryimage-wrapper"><div class="cinematicmedia_outter_wrapper"><div class="cinematicmedia_inner_wrapper" style="visible:'+vis+'"></div></div></div>');

				 	// IF IT IS AN IMG
				 	if (bg.data('repeatbg2') != true) {
				 		bg.find('.cinematic-blurryimage-wrapper .cinematicmedia_inner_wrapper').append('<div class="cinematic-blurryimage fullscreenimgs"></div>');
					 	bg.find('.cinematic-blurryimage').css({backgroundRepeat:bgblurrepeat,backgroundImage:'url('+bg.data('srcblur')+')',backgroundSize:bgsizeblur,backgroundPosition:'center center',width:'100%',height:'100%'});
					 }

					 				 	// IF IT IS A TILED PNG
				 	if (bg.data('repeatbg2') == true) {
					 	bg.find('.cinematic-blurryimage-wrapper .cinematicmedia_inner_wrapper').append('<div class="cinematic-blurryimage fullscreenimgs"></div>');
 					 	bg.find('.cinematic-blurryimage').css({backgroundImage:'url('+bg.data("srcblur")+')',backgroundPosition:'center center',width:'100%',height:'100%',backgroundRepeat:"repeat"});
 					}


					 	if (i==0) {
					 		jQuery('.single_blurredbg').each(function() {
							 	var bbg = jQuery(this);
							 	var bgw = bg.data('width');
							 	var bgh = bg.data('height');
							 	bbg.data('width',bgw);
							 	bbg.data('height',bgh);
							 	if (jQuery('body').hasClass("nobluredcontainers"))
							 		bbg.css({background:"transparent"});
							 	else
								 	bbg.css({backgroundImage:'url('+bg.data('srcblur')+')'});
							 	calculateBlurredBackgrounds();
							 });
						 }


					bg.waitForImages(function() {
					 	//adjustBGImageSize(jQuery(this).find('.fullscreenimgs'));
					 	jQuery(this).find('.fullscreenimgs').addClass("loaded");
				 	})

				 /*	jQuery('.cinematic.overheader .cinematic-basicimage').css({backgroundPosition:'center top'});
				 	jQuery('.cinematic.overheader .cinematic-blurryimage').css({backgroundPosition:'center top'});	*/

				 	jQuery('.cinematic.overheader .cinematic-basicimage-wrapper').height(jQuery('.cinematic.original').height());
				 	jQuery('.cinematic.overheader .cinematic-blurryimage-wrapper').height(jQuery('.cinematic.original').height());



		 	})


			 	if (slider.hasClass("original")) {
				 	showNextSliderContent(slider,1);

					// SCROLL SLIDER ON CLICK OF NAVIGATION BUTTONS
					jQuery('#cinematic-navigation .cinematic-left').on('click',function() {
								horizontalScrollHandler(-1);
				 	});

				 	// SCROLL SLIDER ON CLICK OF NAVIGATION BUTTONS
					jQuery('#cinematic-navigation .cinematic-right').on('click',function() {
							horizontalScrollHandler(1);
				 	});



				 	 var element = document.getElementById('allcontent');
				 	if (is_mobile()) {
						/*Hammer(element).on("swiperight", function() {
										jQuery('#cinematic-navigation .cinematic-left').click();
									})
						Hammer(element).on("swipeleft", function() {
										jQuery('#cinematic-navigation .cinematic-right').click();
									})*/
					}


				}




		});


		var timer;
		if (jQuery('body').hasClass("withsoftedge")) {
			jQuery('.cinematic.overheader').height(jQuery('#headerwrapper').outerHeight()+30);
		} else {
			jQuery('body svg #m1').remove();
			jQuery('.cinematic.overheader').css({'-webkit-mask-image':'none'});
			jQuery('.cinematic.overheader').height(jQuery('#headerwrapper').outerHeight());
		}
		// WINDOW RESIZE FUNCTION FOR BG IMAGES
		jQuery(window).on('resize',function() {

				var bod = jQuery('body');

				jQuery('.single_blurredbg').each(function() { TweenLite.set(jQuery(this),{opacity:0}); });
				// CALCULATE THE BLURRED BACKGROUND PARTS
				calculateBlurredBackgrounds();
				if (jQuery('body').hasClass("withsoftedge"))
					jQuery('.cinematic.overheader').height(jQuery('#headerwrapper').outerHeight()+30);
				else
					jQuery('.cinematic.overheader').height(jQuery('#headerwrapper').outerHeight());


				if (jQuery(window).width()!=bod.data('lastwidth') || jQuery(window).height()!=bod.data('lastheight')) {



					bod.data('lastwidth',jQuery(window).width());
					bod.data('lastheight',jQuery(window).height());
					jQuery('.cinematic.overheader .cinematic-basicimage-wrapper').height(jQuery('.cinematic.original').height());
				 	jQuery('.cinematic.overheader .cinematic-blurryimage-wrapper').height(jQuery('.cinematic.original').height());


					clearTimeout(timer)
					timer = setTimeout(function() {
								jQuery('.single_blurredbg').each(function() { TweenLite.to(jQuery(this),0.3,{opacity:1}); });
								// SET THE MAIN CONTENT POSITION DEPENDING ON SCREENSIZE
								setMainContentMargin();
								horizontalScrollHandler(0,0);
								clearTimeout(jQuery('body').data('timer'));
								jQuery('body').data('inanimation',0);
					},300)
				}

		});


		// POSITION DEPENDING BLUR EFFECT AND CAPTION EFFECT

		//if (!is_mobile()) {

				//jQuery('.cinematic .cinematic-blurryimage-wrapper').addClass("slowanim");

				jQuery(window).waypoint(function(direction) {
					if (!jQuery('.header-menu-wrapper').hasClass("opened")) {
						if (direction=="down") {

							TweenLite.to(jQuery('.cinematic .cinematic-blurryimage-wrapper'),0.6,{autoAlpha:1});
						} else {

							TweenLite.to(jQuery('.cinematic .cinematic-blurryimage-wrapper'),0.6,{autoAlpha:0});
						}

					}

				}, { offset:-100 });

				if (!isIE(8))
					jQuery(window).waypoint(function(direction) {
						if (!jQuery('.header-menu-wrapper').hasClass("opened")) {

							if (direction=="down" && jQuery('.fakebgformobile').length<1) {
								TweenLite.to(jQuery('#cinematic-title-wrapper'),0.5,{y:-200,autoAlpha:0,ease:Power3.easeOut,overwrite:"auto"});

							} else {
								TweenLite.to(jQuery('#cinematic-title-wrapper'),0.5,{y:0,autoAlpha:1,ease:Power3.easeOut,overwrite:"auto"});
							}
						}

					}, { offset: function() { return -jQuery(this).height()/2; } });
		//}

		////////////////////////////////////////////////////////////////////////////


		var element = document.body;
		if (is_mobile()) {


			if (jQuery(window).width()>480) {
				/* IN CASE WE NEED THE STICKY MENU AT TOP WE COULD TURN THIS ON */
				try{
					/*Hammer(element).on('release',function(event){
							setTimeout(function() {
								if (!jQuery('.header-menu-wrapper').hasClass("opened")) {
									checkMobilePosition();
								}
							},100);
					});

					Hammer(element).on('dragup',function(event){

						checkMobilePosition();
					});
					Hammer(element).on('dragdown',function(event){

						checkMobilePosition();
					});*/
				} catch(e) {}
			} else {
				//jQuery('.cinematic .cinematic-blurryimage-wrapper').addClass("blurred");
			}
		}

		/// ANIMATE THE BUTTONS ON THE CAPTION CONTAINER
			var cr = jQuery('.cinematic-right');
			var cl = jQuery('.cinematic-left');
			var cd = jQuery('.cinematic-down');

			if (!is_mobile() && !jQuery('body').hasClass("withoutmoduleanimations") && !isIE(8)) {
				try{
					TweenLite.set(cr,{transformOrigin:"50% 50%",opacity:0,scale:0.25,x:5,y:0,transformPerspective:500});
					TweenLite.set(cl,{transformOrigin:"50% 50%",opacity:0,scale:0.45,x:-5,y:0,transformPerspective:500});
					TweenLite.set(cd,{transformOrigin:"50% 50%",opacity:0,scale:0.50,y:5,transformPerspective:500});

					setTimeout(function() {
							TweenLite.to(cr,0.4,{opacity:1,scale:1,z:0,x:0,y:0,rotationY:0,ease:Back.easeOut});

						},2000);
					setTimeout(function() {
							TweenLite.to(cl,0.3,{opacity:1,scale:1,z:0,x:0,y:0,rotationY:0,ease:Back.easeOut});
						},2400);
					setTimeout(function() {
							TweenLite.to(cd,0.5,{opacity:1,scale:1,z:0,y:0,rotationY:0,ease:Back.easeOut});
						},2200);
				} catch(e) {}
			} else {
							TweenLite.set(cr,{autoAlpha:1,scale:1,ease:Power3.easeOut});
							TweenLite.set(cl,{autoAlpha:1,scale:1,ease:Power3.easeOut});
							TweenLite.set(cd,{autoAlpha:1,scale:1,ease:Power3.easeOut});

			}

			setTimeout(function() {
					jQuery('.cinematic-navbutton').on("mouseover",function() {
							TweenLite.to(jQuery(this),0.3,{scale:1.25,ease:Power3.easeOut});
						});
					jQuery('.cinematic-navbutton').on("mouseout",function() {
							TweenLite.to(jQuery(this),0.3,{scale:1,ease:Power3.easeOut});
						})

					if (jQuery('body').data('autoslider') != undefined && !is_mobile()) {

						if (parseInt(jQuery('body').data('autoslider'),0) >0) {

							var timeset = parseInt(jQuery('body').data('autoslider'),0)
							jQuery('body').append('<div id="slidertimera" style="position:fixed;bottom:0px;left:0px;width:100%;z-index:10000;height:3px;background:#fff"></div>');
							TweenLite.set(jQuery('#slidertimera'),{width:"0%",opacity:0.2});
							TweenLite.fromTo(jQuery('#slidertimera'),timeset,{width:"0%"},{width:"100%",ease:Linear.easeNone});
							var sliderint = setInterval(function () {
								TweenLite.fromTo(jQuery('#slidertimera'),timeset,{width:"0%"},{width:"100%",ease:Linear.easeNone});
								jQuery('.cinematic-right.cinematic-navbutton').click();
							},timeset * 1000)
							
							if (jQuery('body').data('alwaysscroll') == undefined) 								
								jQuery(window).on("scroll",function() {
									if (jQuery(window).scrollTop()>300) {
										clearInterval(sliderint);
										TweenLite.set(jQuery('#slidertimera'),{width:"0%",overwrite:"all"});
										jQuery('#slidertimera').remove();
									}
								});
							
						}
					}
			},2000)




}
		/***************************************
			-	Calculate Blurred Backgrounds  -
		****************************************/
		function calculateBlurredBackgrounds() {
			jQuery('.single_blurredbg').each(function() {
					var bbg = jQuery(this);
				 	var winw = jQuery(window).width();
				 	var winh = jQuery(window).height()*1.15;
				 	TweenLite.set(bbg,{transformPerspective:300,transformOrigin:"center center"});
				 	//TweenLite.set(bbg.parent(),{transformPerspective:300,transformOrigin:"center center"});
				 	var bgw = bbg.data('width');
				 	var bgh = bbg.data('height');
				 	var bgoffsets = calculateOffsets(bgw,bgh);
				 	var xoff = bgoffsets[0] - bbg.offset().left;
				 	var yoff = bgoffsets[1] - bbg.offset().top + jQuery(window).scrollTop();
				 	bbg.css({width:winw,height:winh, backgroundPosition:xoff+"px "+yoff+"px"});
			});
		}

		function calculateOffsets(bgw,bgh) {
			var ww = jQuery(window).width();
			var hh = jQuery(window).height()*1.15;


			var widthRatio = ww / bgw;
			var heightRatio = hh / bgh;

			var ratio = Math.max(widthRatio, heightRatio);

			var offsets = new Array;
			offsets[0]= Math.ceil(ratio*bgw);
			offsets[1]= Math.ceil(ratio*bgh);



			offsets[0] = (ww-offsets[0]) /2;
			offsets[1] = (hh-offsets[1]) / 2;


			return offsets;
		}


		/*********************************
			-	CHECK MOBILE POSITION	-
		*********************************/
		function checkMobilePosition() {
			var ctw = jQuery('#cinematic-title-wrapper');
			if (jQuery(window).scrollTop()>50 && ctw.data('gone')!=1) {
				ctw.data('gone',1);
//				ctw.stop();
//				TweenLite.to(ctw,0.5,{y:-0,autoAlpha:0,ease:Power3.easeOut,overwrite:"auto"});
//				ctw.transition({y:-20,opacity:0,duration:300});

   			    jQuery('.cinematic .cinematic-blurryimage-wrapper').addClass("blurred");
   			    if (jQuery(window).height()<960)
	   			    jQuery('.cinematic .cinematic-blurryimage-wrapper').addClass("quickanim");
	   			else
	   			    jQuery('.cinematic .cinematic-blurryimage-wrapper').addClass("slowanim");

			}
			if (jQuery(window).scrollTop()<51 && ctw.data('gone')==1) {
				ctw.data('gone',0);
//				ctw.stop();
//				ctw.transition({y:0,opacity:1,duration:300});
//				TweenLite.to(jQuery('#cinematic-title-wrapper'),0.5,{y:0,autoAlpha:1,ease:Power3.easeOut,overwrite:"auto"});
				jQuery('.cinematic .cinematic-blurryimage-wrapper').removeClass("blurred");
			}
		}



		/******************************
			-	SHOW NEXT CONTENT	-
		********************************/
		function showNextSliderContent(slider,dir) {
						var atslide=slider.data('atslide');
						if (slider.hasClass("original")) {
					  		  var ul = slider.find('ul').first();

						  	if (slider.find('li').length>0) {
							 	  var content = ul.find('li:nth('+atslide+') .slidercontent');
							 	  var cholder = jQuery('body').find(slider.data('contentholder'));

							 	  cholder.find('.newwrap').addClass('removeme-content').removeClass("newwrap");
							 	  if (!cholder.find('.removeme-content').length) cholder.wrapInner('<div class="removeme-content"></div>');


							 	  // REMOVE OLD TEXT
			 	  				  TweenLite.to(cholder.find('.removeme-content'),0.4,{x:(-60*dir),transformPerspective:100,autoAlpha:0,ease:Power3.easeOut,overwrite:"auto"});

			 	  				  // ADD NEW TEXT
							 	  cholder.append('<div class="newwrap"></div>');
							 	  cholder.find('.newwrap').css({'position':'absolute','visibility':"hidden"}).html(content.html());
							 	  var hhh;
							 	  	hhh = cholder.find('.newwrap').height();



							 	  setTimeout(function(){

							 	  	TweenLite.set(cholder.find('.newwrap'),{display:'block',opacity:1,visibility:'visible',position:'relative'});
							 	  	hhh = cholder.find('.newwrap').height();
							 	  	hhh = hhh==0 ? 79 : hhh;
							 	  	TweenLite.to(jQuery('#slidercontent-wrapper'),0.25,{height:hhh,minHeight:hhh});
							 	  	TweenLite.fromTo(cholder.find('.newwrap'),0.6,{position:"relative",x:(60*dir),transformPerspective:100,opacity:0,display:"none"},
							 	  												{display:"block",x:0,opacity:1,ease:Power3.easeOut,delay:0.25,overwrite:"all"});

							 	  },410)


							 	  try{
								 	  if (!content.html().length || content.children().length==0)
								 	  	cholder.parent().parent().addClass("empty")


								 	  setTimeout(function() {
								 	  	 if (content.html().length || content.children().length!=0)
								 	  	 	cholder.parent().parent().removeClass("empty")


								 	  	 cholder.find('.removeme-content').remove();
								 	  },400);
								 }
								 catch(e){}
							 }
						}

		}

		/***************************************
			-	BG SLIDER HORIZONTAL SCROLL	-
		***************************************/
		function horizontalScrollHandler(dir,speedover) {

					jQuery('.cinematic').each(function(slidenr) {

							  var slider=jQuery(this);
							  var ul = slider.find('ul').first();

							  if (ul.find('li').length==0) return false;

						 	  //ACTUAL SLIDE BASED ON INFOS ABOVE
						 	  var atslide=slider.data('atslide');

						 	  var slideamount = slider.find('ul li .slide-background-image').length;

						  	  var distance = ul.find('li').first().width();
						 	  var ease="easeInOutCubic";

						  	  var speed = distance/1.5;
						  	  var noparallax=0;


						  	  if (speed<1000) speed=1000;
						  	  if (speed>2000) speed=2000;

						  	  if (speedover==0) {
						  	    speed=1000;
						  	   	noparallax=1;
						  	   	ease="linear";
						  	   }

						  	  if (jQuery('body').data('inanimation') != 1 ) {
							 	  // NEXT SLIDE TO CATCH  (dir -1 left, dir 1 right, dir 0 closest)
							 	  if (dir==-1) {
								  	 var nexts = atslide-1
								  	 if (nexts<0) {
								  	 	nexts =slideamount-1;
								  	 	noparallax=1;
								  	 }
								  } else

								  if (dir==1) {
								  	 var nexts = atslide+1;
								  	 if (nexts==slideamount) {
								  	 	nexts =0;
								  	 	noparallax=1;
								  	 }
								  } else

								  if (dir==0) {
								  	  var nexts = atslide;
								  }

					  	 		  slider.data('atslide',nexts);


			  					  var cw = jQuery(".slide-background-image").width();


			  					  	// ANIMATE THE SCROLL TO THE NEXT POSSIBLE IMAGE

							  		if (slidenr>0)  jQuery('body').data('inanimation',1)
							  		if (slidenr==0) showNextSliderContent(slider,dir);

							  		// LETS SWAP ALL BG IMAGE FOR EACH BLURED SMALLITEM
							  		var nextbg = jQuery('.cinematic.original ul li:eq('+nexts+') .slide-background-image');
							  		jQuery('.single_blurredbg').each(function() {
									 	var bbg = jQuery(this);
									 	var bgw = nextbg.data('width');
									 	var bgh = nextbg.data('height');
									 	bbg.data('width',bgw);
									 	bbg.data('height',bgh);
	 								 	if (jQuery('body').hasClass("nobluredcontainers"))
	 								 		bbg.css({background:"transparent"});
	 								 	else
									 	bbg.css({backgroundImage:'url('+nextbg.data('srcblur')+')'});
									 	calculateBlurredBackgrounds();
									 	TweenLite.set(bbg,{opacity:0});
									 	TweenLite.to(bbg,0.3,{opacity:1,delay:0.7});
									 });


									//ul.transition({left:(0-cw*nexts)+"px",easing:ease,duration:speed})
									TweenLite.to(ul,(speed/1000),{left:(0-cw*nexts),ease:Power3.easeInOut});
									var curslnr = Math.round(Math.abs((ul.position().left)/jQuery(window).width()));
									var comslnr = Math.round(Math.abs((0-cw*nexts)/jQuery(window).width()));
									slider.find(".slide-background-image").each(function(i) {
									  	// SPEED FOR TRANSITION
									  	var offset = 0;
									  	// NEXT OF PREVIOUS SLIDE TO SHOW FRO MCURRENT POSITION

									  	if (noparallax==0) {
											  	if (dir==1) {
												  	if (i>=nexts)
												  		offset=-0.7*distance;
												 } else
												if (dir==-1) {
													if (i<=nexts)
												  		offset=0.7*distance;
												 } else {
													 offset=0;
												 }
												jQuery(this).find('.cinematicmedia_inner_wrapper').each(function() {
												  	var slide=jQuery(this);
												  	// SET BACKGROUND POSITION OF BACKGROUND IMAGE FOR PARALLAX EFFECT
												  	//slide.stop();
												  	//slide.css({ left: offset+ "px"})
												  	//slide.transition({ left:"0px",easing:ease,duration:speed})

												  	if (i == curslnr || i == comslnr)
													  	TweenLite.fromTo(slide,(speed/1000),{visibility:'visible',left:offset},{left:0,ease:Power3.easeInOut});
													else {
														slide.css({visibility:'hidden'});
													}
												 });
										} else {
											jQuery(this).find('.cinematicmedia_inner_wrapper').each(function() {
												var slide=jQuery(this);
												slide.css({visibility:'visible'});
											});
										}
									  });
									  if (slidenr >0) {
										  clearTimeout(jQuery('body').data('timer'));
										  jQuery('body').data('timer',setTimeout(function() {
										  	jQuery('body').data('inanimation',0)
										  	jQuery(this).find('.cinematicmedia_inner_wrapper').each(function() {
												var slide=jQuery(this);
												if (i == curslnr || i == comslnr)
													slide.css({visibility:'visible'});
												else
													slide.css({visibility:'hidden'});
											});
										  },speed-150));

										}

								}
					});


			}



		//////////////////
		// IS MOBILE ?? //
		//////////////////
		function is_mobile() {
		    var agents = ['android', 'webos', 'iphone', 'ipad', 'blackberry','Android', 'webos', ,'iPod', 'iPhone', 'iPad', 'Blackberry', 'BlackBerry'];
			var ismobile=false;
			var i;
		    for(i in agents) {

			    if (navigator.userAgent.split(agents[i]).length>1) {
		            ismobile = true;

		          }
		    }
		    return ismobile;
		}



/*global jQuery */
/*jshint multistr:true browser:true */
/*!
* FitVids 1.0
*
* Copyright 2011, Chris Coyier - http://css-tricks.com + Dave Rupert - http://daverupert.com
* Credit to Thierry Koblentz - http://www.alistapart.com/articles/creating-intrinsic-ratios-for-video/
* Released under the WTFPL license - http://sam.zoy.org/wtfpl/
*
* Date: Thu Sept 01 18:00:00 2011 -0500
*/

(function( jQuery ){

  "use strict";

  jQuery.fn.fitVids = function( options ) {
    var settings = {
      customSelector: null
    };

    if(!document.getElementById('fit-vids-style')) {

      var div = document.createElement('div'),
          ref = document.getElementsByTagName('base')[0] || document.getElementsByTagName('script')[0];

      div.className = 'fit-vids-style';
      div.id = 'fit-vids-style';
      div.style.display = 'none';
      div.innerHTML = '&shy;<style>         \
        .fluid-width-video-wrapper {        \
           width: 100%;                     \
           position: relative;              \
           padding: 0;                      \
        }                                   \
                                            \
        .fluid-width-video-wrapper iframe,  \
        .fluid-width-video-wrapper object,  \
        .fluid-width-video-wrapper embed {  \
           position: absolute;              \
           top: 0;                          \
           left: 0;                         \
           width: 100%;                     \
           height: 100%;                    \
        }                                   \
      </style>';

      ref.parentNode.insertBefore(div,ref);

    }

    if ( options ) {
      jQuery.extend( settings, options );
    }

    return this.each(function(){
      var selectors = [
        "iframe[src*='player.vimeo.com']",
        "iframe[src*='youtube.com']",
        "iframe[src*='youtube-nocookie.com']",
        "iframe[src*='kickstarter.com'][src*='video.html']",
        "object",
        "embed"
      ];

      if (settings.customSelector) {
        selectors.push(settings.customSelector);
      }

      var $allVideos = jQuery(this).find(selectors.join(','));
      $allVideos = $allVideos.not("object object"); // SwfObj conflict patch

      $allVideos.each(function(){
        var $this = jQuery(this);
        if (this.tagName.toLowerCase() === 'embed' && $this.parent('object').length || $this.parent('.fluid-width-video-wrapper').length) { return; }
        var height = ( this.tagName.toLowerCase() === 'object' || ($this.attr('height') && !isNaN(parseInt($this.attr('height'), 10))) ) ? parseInt($this.attr('height'), 10) : $this.height(),
            width = !isNaN(parseInt($this.attr('width'), 10)) ? parseInt($this.attr('width'), 10) : $this.width(),
            aspectRatio = height / width;
        if(!$this.attr('id')){
          var videoID = 'fitvid' + Math.floor(Math.random()*999999);
          $this.attr('id', videoID);
        }
        $this.wrap('<div class="fluid-width-video-wrapper"></div>').parent('.fluid-width-video-wrapper').css('padding-top', (aspectRatio * 100)+"%");
        $this.removeAttr('height').removeAttr('width');
      });
    });
  };
})( jQuery );


/*! Copyright (c) 2013 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.1.3
 *
 * Requires: 1.2.2+
 */

(function (factory) {
    if ( typeof define === 'function' && define.amd ) {
        // AMD. Register as an anonymous module.
        define(['jquery'], factory);
    } else if (typeof exports === 'object') {
        // Node/CommonJS style for Browserify
        module.exports = factory;
    } else {
        // Browser globals
        factory(jQuery);
    }
}(function (jQuery) {

    var toFix = ['wheel', 'mousewheel', 'DOMMouseScroll', 'MozMousePixelScroll'];
    var toBind = 'onwheel' in document || document.documentMode >= 9 ? ['wheel'] : ['mousewheel', 'DomMouseScroll', 'MozMousePixelScroll'];
    var lowestDelta, lowestDeltaXY;

    if ( jQuery.event.fixHooks ) {
        for ( var i = toFix.length; i; ) {
            jQuery.event.fixHooks[ toFix[--i] ] = jQuery.event.mouseHooks;
        }
    }

    jQuery.event.special.mousewheel = {
        setup: function() {
            if ( this.addEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.addEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = handler;
            }
        },

        teardown: function() {
            if ( this.removeEventListener ) {
                for ( var i = toBind.length; i; ) {
                    this.removeEventListener( toBind[--i], handler, false );
                }
            } else {
                this.onmousewheel = null;
            }
        }
    };

    jQuery.fn.extend({
        mousewheel: function(fn) {
            return fn ? this.bind("mousewheel", fn) : this.trigger("mousewheel");
        },

        unmousewheel: function(fn) {
            return this.unbind("mousewheel", fn);
        }
    });


    function handler(event) {
        var orgEvent = event || window.event,
            args = [].slice.call(arguments, 1),
            delta = 0,
            deltaX = 0,
            deltaY = 0,
            absDelta = 0,
            absDeltaXY = 0,
            fn;
        event = jQuery.event.fix(orgEvent);
        event.type = "mousewheel";

        // Old school scrollwheel delta
        if ( orgEvent.wheelDelta ) { delta = orgEvent.wheelDelta; }
        if ( orgEvent.detail )     { delta = orgEvent.detail * -1; }

        // New school wheel delta (wheel event)
        if ( orgEvent.deltaY ) {
            deltaY = orgEvent.deltaY * -1;
            delta  = deltaY;
        }
        if ( orgEvent.deltaX ) {
            deltaX = orgEvent.deltaX;
            delta  = deltaX * -1;
        }

        // Webkit
        if ( orgEvent.wheelDeltaY !== undefined ) { deltaY = orgEvent.wheelDeltaY; }
        if ( orgEvent.wheelDeltaX !== undefined ) { deltaX = orgEvent.wheelDeltaX * -1; }

        // Look for lowest delta to normalize the delta values
        absDelta = Math.abs(delta);
        if ( !lowestDelta || absDelta < lowestDelta ) { lowestDelta = absDelta; }
        absDeltaXY = Math.max(Math.abs(deltaY), Math.abs(deltaX));
        if ( !lowestDeltaXY || absDeltaXY < lowestDeltaXY ) { lowestDeltaXY = absDeltaXY; }

        // Get a whole value for the deltas
        fn = delta > 0 ? 'floor' : 'ceil';
        delta  = Math[fn](delta / lowestDelta);
        deltaX = Math[fn](deltaX / lowestDeltaXY);
        deltaY = Math[fn](deltaY / lowestDeltaXY);

        // Add event and delta to the front of the arguments
        args.unshift(event, delta, deltaX, deltaY);

        return (jQuery.event.dispatch || jQuery.event.handle).apply(this, args);
    }

}));
